<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Event Loops - Roku SDK Documentation - Developer Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="https://sdkdocs.roku.com">

<meta id="atlassian-token" name="atlassian-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">


<meta id="confluence-space-key" name="confluence-space-key" content="sdkdoc">


    

    <meta name="confluence-request-time" content="1458566770747">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="6f3f47137c1b3ed14b1e16e051694721">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="1611296">
            <meta name="ajs-latest-page-id" content="1611296">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Event Loops">
            <meta name="ajs-parent-page-title" content="Developer Guide">
            <meta name="ajs-parent-page-id" content="3736646">
            <meta name="ajs-space-key" content="sdkdoc">
            <meta name="ajs-space-name" content="Roku SDK Documentation">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://sdkdocs.roku.com">
            <meta name="ajs-version-number" content="5.9.1-OD-65-062">
            <meta name="ajs-build-number" content="6150">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="clc.quick.create,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://sdkdocs.roku.com/opensearch/osd.action" title="Developer Documentation">


<link type="text/css" rel="stylesheet" href="../../s/c0b179288d335d9e912667cdb75fb8d2-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css%3Fbuild-number=6150.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d375ee99916b6b096207b53cf4260ab0-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css%3Fhighlightactions=true&amp;flavour=VANILLA&amp;custom-site-logo=true.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/35e02545dc3a2fc430eccbb927fe7227-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/31/_/styles/colors.css" media="all">
<script type="text/javascript" src="../../s/a72faf4a376b855acc1dc1b5e40829cb-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/js/batch.js%3Fatlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=6150"></script>
<script type="text/javascript" src="../../s/fd3d085a9edff5a756d242bf1bc14976-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.js%3Fanalytics-uploadable=true&amp;highlightactions=true&amp;flavour=VANILLA&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/js/theme.doc/batch.js%3Flocale=en-GB"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.js"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes.js"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init.js%3Flocale=en-GB"></script>


        
    

        
        <meta name="ajs-site-title" content="Developer Documentation">

    
    

<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZTPN7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager -->

<!-- New Relic -->

<!-- End New Relic -->

    
                <link rel="canonical" href="Event+Loops.html">
        <link rel="shortlink" href="https://sdkdocs.roku.com/x/IJYY">
    <meta name="wikilink" content="[sdkdoc:Event Loops]">
    <meta name="page-version" content="6">

</head>

<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id="stp-licenseStatus-banner"></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>







<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-primary">
<h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../sdkdoc.1.html"><img src="https://sdkdocs.roku.com/download/attachments/524289/atl.site.logo?version=2&amp;modificationDate=1440675577312&amp;api=v2" alt="Developer Documentation"><span class="aui-header-logo-text">Developer Documentation</span></a></h1>
<ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="https://sdkdocs.roku.com/spacedirectory/view.action" class=" aui-nav-imagelink" title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="Event+Loops.html#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a id="space-pages-link" href="https://sdkdocs.roku.com/pages/listpages.action?key=sdkdoc" class="    " title="Browse pages in the Roku SDK Documentation space">
        Pages
</a>
</li>
                                            <li>
    
            
<a id="space-blogposts-link" href="https://sdkdocs.roku.com/pages/viewrecentblogposts.action?key=sdkdoc" class="    " title="Browse blogs in the Roku SDK Documentation space">
        Blog
</a>
</li>
                                            <li>
    
            
<a id="space-labels-link" href="https://sdkdocs.roku.com/labels/listlabels-heatmap.action?key=sdkdoc" class="    " title="Browse labels in the Roku SDK Documentation space">
        Labels
</a>
</li>
                                            <li>
    
            
<a id="space-advanced-link" href="https://sdkdocs.roku.com/spaces/viewspacesummary.action?key=sdkdoc" class="    " title="Browse additional space functions in the Roku SDK Documentation space">
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
                        <li class="aui-buttons">
            </li>
    </ul>
</div></div>
<!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar" class="padding-div">
        

                    
    






            </div>
    <div id="splitter-content">

        

                        
            
<div id="main" class="aui-page-panel">
    <div id="main-header">
        
        
    

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                                        
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="Developer+Guide.html">Developer Guide</a></span>
                                                    </li>
</ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="Event+Loops.html">Event Loops</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        













    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        


        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="3736646">
        </fieldset>

                            
    

                    

        
        <a href="Event+Loops.html#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a id="content-metadata-page-restrictions-hidden" href="Event+Loops.html#" rel="nofollow" class="hidden" title="Unrestricted">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="../~jbush.html" class="url fn">Jeff Bush</a></span>, last modified by <span class="editor">     <a href="../~mnudelman.html" class="url fn">Mark Nudelman</a></span> on <a class="last-modified" title="Show changes" href="https://sdkdocs.roku.com/pages/diffpagesbyversion.action?pageId=1611296&amp;selectedPageVersions=5&amp;selectedPageVersions=6">Dec 30, 2015</a>
                </li>
        </ul>
    </div>


<a href="Event+Loops.html#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <h3 id="EventLoops-Events">Events</h3>
<p>An event is a thing like an on-screen button press, a remote button press, a video that has finished playing back, etc. When an event occurs, a "message" describing the event is created.  In this documentation, we often refer to messages or events interchangably.</p>
<h3 id="EventLoops-Eventloops">Event loops</h3>
<p>A script will normally interact with events via an event loop.  At a high level, an event loop is a piece of code with this structure:</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[while true
    &#39; wait for an event
    &#39; process the event
end while]]></script>
</div></div>
<h3 id="EventLoops-Messageports">Message ports</h3>
<p>Messages describing events are sent to and received from objects of type "roMessagePort". By calling ifSetMessagePort.SetMessagePort() in a particular component, you instruct that component to deliver messages to a particular roMessagePort.  Your script can then receive messages from that port to be notified of the events related to that component.</p>
<h3 id="EventLoops-Scriptstructure">Script structure</h3>
<p>Normally a script will have a structure like this:</p>
<ul>
<li>The script creates a BrightScript Component of type "roMessagePort" .</li>
<li>The script instructs one or more other BrightScript Components to send their events to this message port, by calling SetMessagePort().</li>
<li>The script waits for an event to be delivered to the message port. The actual function to do this is <a href="ifMessagePort.html">ifMessagePort.WaitMessage</a>(), but BrightScript also provides the built-in statement WAIT to make this easier.</li>
<li>When the script receives a message, it determines what type of event occurred and handles the event.</li>
<li>If a script receives an unknown type of event, it should ignore it; then just continue processing other events. Roku may occasionally add new events, and if your script is written to exit on unknown events, any future events that Roku may add will cause your application to misbehave.</li>
</ul>
<p>Here is an example of a simple script that processes events.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[port = CreateObject(&quot;roMessagePort&quot;)
screen = CreateObject(&quot;roSpringboardScreen&quot;) 
screen.SetMessagePort(port) &#39; instruct screen to send events to port
screen.Show()
while true
	msg = wait(0, port) &#39; wait for a message
	if type(msg) = &quot;roSpringboardScreenEvent&quot; then
		if msg.isScreenClosed() then
			return -1
		elseif msg.isButtonPressed()
			print &quot;button pressed: &quot;;msg.GetIndex()
		else
			&#39; ignore other unknown or uninteresting roSpringBoardScreenEvents
		endif
	else
		&#39; ignore other events, not type roSpringboardScreenEvent
	endif
end while]]></script>
</div></div>
<h3 id="EventLoops-Gamescripts">Game scripts</h3>
<p>Real-time games which use the <a href="ifDraw2D.html">ifDraw2D </a>interface typically cannot wait like this for a message in their event loop, because the screen may need to be updated with new animation frames even if no buttons are pressed or other events occur.  One way to deal with this is to use a timeout as the first parameter of the call to wait:</p>
<pre>msg = wait(5, port)</pre>
<p>This waits for a message, but if no message is received within 5 milliseconds, the wait returns and msg is set to 'invalid'.  When feasible, this is a simple approach.</p>
<p>However, an approach that usually offers more predictable performance is to use <a href="ifMessagePort.html">ifMessagePort.GetMessage</a> instead of wait.  This is because GetMessage will return immediately if no message is available, while the actual amount of time before a timed wait returns can vary depending on various factors.  A game script is often structured like this.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[port = CreateObject(&quot;roMessagePort&quot;)
screen = CreateObject(&quot;roScreen&quot;) 
screen.SetMessagePort(port) &#39; instruct screen to send events to port
while true
	msg = port.GetMessage() &#39; get a message, if available
	if type(msg) = &quot;roUniversalControlEvent&quot; then
		print &quot;button pressed: &quot;;msg.GetInt()
	endif
	DrawOntoScreen(screen) &#39; call some ifDraw2D methods to draw on screen
	screen.SwapBuffers()
end while]]></script>
</div></div>
<p>Note that in this case, it is the call to SwapBuffers, not GetMessage, that causes the wait in each iteration of the loop.</p>
<h3 id="EventLoops-Timedevents">Timed events</h3>
<p>Sometimes you may wish to have certain code executed periodically, or a certain amount of time after another event has occurred.  The best way to handle this is usually to incorporate the handling of the timed event into your main event loop, and use an roTimespan object as a clock to determine when it is time to perform the next action.  For example, this loop is similar to the Springboard screen event loop shown above, but it also calls the function DoSomething once every 5 seconds.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[clock = CreateObject(&quot;roTimespan&quot;)
next_call = clock.TotalMilliseconds() + 5000
while true
	msg = wait(250, port) &#39; wait for a message
	if type(msg) = &quot;roSpringboardScreenEvent&quot; then
		if msg.isScreenClosed() then
			return -1
		elseif msg.isButtonPressed()
			print &quot;button pressed: &quot;;msg.GetIndex()
		else
			&#39; ignore other unknown or uninteresting roSpringBoardScreenEvents
		endif
	else
		&#39; ignore other events, not type roSpringboardScreenEvent
	endif
	if clock.TotalMilliseconds() &gt; next_call then
		DoSomething()
		next_call = clock.TotalMilliseconds() + 5000
	end if
end while]]></script>
</div></div>
<p>Notice that the first parameter of wait has been changed so that it returns after 250 milliseconds even if no event has occurred.  This ensures that DoSomething gets called even in the absence of other activity on the port.</p>
<h3 id="EventLoops-Typesofmessages">Types of messages</h3>
<p>Different Brightscript components generate different types of messages. For example, the component "roSpringboardScreen" sends event messages of type "roSpringboardScreenEvent". In general, a Brightscript function dealing with a specific component should only react to events generated by that component.  For example, as in the example above, code that deals with events generated by an roSpringboardScreen should be inside an if statement like this:</p>
<pre>    if type(message) = "roSpringboardScreenEvent"</pre>
<p>When a message of the desired type is received, the code will process it.  For example, one might be looking for a "button pressed" event type. The example above shows that the way to test for this is to call the method isButtonPressed:</p>
<pre>    if message.isButtonPressed()</pre>
<p>An event loop needs to be aware of the possible event classes and types which it can receive and process them.</p>
<p><br class="atl-forced-newline"> The following is the list of tests for event types. If new types are added, these tests will remain valid.</p>
<pre>    isListItemSelected() as Boolean<br>    isScreenClosed() as Boolean<br>    isListFocused() as Boolean<br>    isListSelected() as Boolean<br>    isListItemFocused() as Boolean<br>    isButtonPressed() as Boolean<br>    isPlaybackPosition() as Boolean<br>    isRemoteKeyPressed() as Boolean<br>    isRequestSucceeded() as Boolean<br>    isRequestFailed() as Boolean<br>    isRequestInterrupted() as Boolean<br>    isStatusMessage() as Boolean<br>    isPaused() as Boolean<br>    isResumed() as Boolean<br>    isCleared() as Boolean<br>    isPartialResult() as Boolean<br>    isFullResult() as Boolean<br>    isAdSelected() as Boolean</pre>
<h6 id="EventLoops-SinceFirmwareversion2.6:">Since Firmware version 2.6:</h6>
<pre>    isStorageDeviceAdded() as Boolean<br>    isStorageDeviceRemoved() as Boolean<br>    isStreamStarted() as Boolean</pre>
<h6 id="EventLoops-SinceFirmwareversion2.7:">Since Firmware version 2.7:</h6>
<pre>    isListItemInfo() as Boolean<br>    isButtonInfo() as Boolean</pre>
<p>In firmware v2.7, support was added for new remotes that have three new buttons:</p>
<ul>
<li>
<strong>Instant replay button</strong>. Upon pressing this button, the video will skip back 7 seconds without re-buffering. Active only in video mode.  App developers do not need to do anything to support it.</li>
<li>
<strong>Info button</strong>. This button must be programmed by app developers, or it will do nothing.  Developers should provide contextually relevant information overlaid on video or other UI screens by using the predicates isListItemInfo() and isButtonInfo() listed above.</li>
<li>
<strong>Back button</strong>. Closes the current screen and pops the display stack in the UI. Active only in non-video mode. In most screens developers handle this by exiting the event loop when an isScreenClosed event is received.  On some screens like roMessageDialog and roPinEntryDialog, developers must explicitly enable the Back button by calling EnableBackButton.</li>
</ul>
<p><strong><br></strong></p>
<p> </p>
<p> </p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://sdkdocs.roku.com/display/sdkdoc/Event+Loops"
    dc:identifier="https://sdkdocs.roku.com/display/sdkdoc/Event+Loops"
    dc:title="Event Loops"
    trackback:ping="https://sdkdocs.roku.com/rpc/trackback/1611296"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="1611296" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


            
</div>


    




    
    

    
    
    








</div>
  
    </div>
</div>


        
            
            



    </div>
</body>
</html>
