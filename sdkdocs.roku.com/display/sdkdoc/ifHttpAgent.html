<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ifHttpAgent - Roku SDK Documentation - Developer Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="https://sdkdocs.roku.com">

<meta id="atlassian-token" name="atlassian-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">


<meta id="confluence-space-key" name="confluence-space-key" content="sdkdoc">


    

    <meta name="confluence-request-time" content="1458566787769">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="6f3f47137c1b3ed14b1e16e051694721">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="1611329">
            <meta name="ajs-latest-page-id" content="1611329">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="ifHttpAgent">
            <meta name="ajs-parent-page-title" content="Interfaces">
            <meta name="ajs-parent-page-id" content="1611295">
            <meta name="ajs-space-key" content="sdkdoc">
            <meta name="ajs-space-name" content="Roku SDK Documentation">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://sdkdocs.roku.com">
            <meta name="ajs-version-number" content="5.9.1-OD-65-062">
            <meta name="ajs-build-number" content="6150">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="clc.quick.create,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://sdkdocs.roku.com/opensearch/osd.action" title="Developer Documentation">


<link type="text/css" rel="stylesheet" href="../../s/c0b179288d335d9e912667cdb75fb8d2-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css%3Fbuild-number=6150.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/css/toc-macro-client-impl/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d375ee99916b6b096207b53cf4260ab0-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css%3Fhighlightactions=true&amp;flavour=VANILLA&amp;custom-site-logo=true.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/35e02545dc3a2fc430eccbb927fe7227-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/31/_/styles/colors.css" media="all">
<script type="text/javascript" src="../../s/a72faf4a376b855acc1dc1b5e40829cb-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/js/batch.js%3Fatlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=6150"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/js/toc-macro-client-impl/batch.js"></script>
<script type="text/javascript" src="../../s/fd3d085a9edff5a756d242bf1bc14976-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.js%3Fanalytics-uploadable=true&amp;highlightactions=true&amp;flavour=VANILLA&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/js/theme.doc/batch.js%3Flocale=en-GB"></script>


        
    

        
        <meta name="ajs-site-title" content="Developer Documentation">

    
    

<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZTPN7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager -->

<!-- New Relic -->

<!-- End New Relic -->

    
                <link rel="canonical" href="ifHttpAgent.html">
        <link rel="shortlink" href="https://sdkdocs.roku.com/x/QZYY">
    <meta name="wikilink" content="[sdkdoc:ifHttpAgent]">
    <meta name="page-version" content="5">

</head>

<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id="stp-licenseStatus-banner"></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>







<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-primary">
<h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../sdkdoc.1.html"><img src="https://sdkdocs.roku.com/download/attachments/524289/atl.site.logo?version=2&amp;modificationDate=1440675577312&amp;api=v2" alt="Developer Documentation"><span class="aui-header-logo-text">Developer Documentation</span></a></h1>
<ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="https://sdkdocs.roku.com/spacedirectory/view.action" class=" aui-nav-imagelink" title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="ifHttpAgent.html#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a id="space-pages-link" href="https://sdkdocs.roku.com/pages/listpages.action?key=sdkdoc" class="    " title="Browse pages in the Roku SDK Documentation space">
        Pages
</a>
</li>
                                            <li>
    
            
<a id="space-blogposts-link" href="https://sdkdocs.roku.com/pages/viewrecentblogposts.action?key=sdkdoc" class="    " title="Browse blogs in the Roku SDK Documentation space">
        Blog
</a>
</li>
                                            <li>
    
            
<a id="space-labels-link" href="https://sdkdocs.roku.com/labels/listlabels-heatmap.action?key=sdkdoc" class="    " title="Browse labels in the Roku SDK Documentation space">
        Labels
</a>
</li>
                                            <li>
    
            
<a id="space-advanced-link" href="https://sdkdocs.roku.com/spaces/viewspacesummary.action?key=sdkdoc" class="    " title="Browse additional space functions in the Roku SDK Documentation space">
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
                        <li class="aui-buttons">
            </li>
    </ul>
</div></div>
<!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar" class="padding-div">
        

                    
    






            </div>
    <div id="splitter-content">

        

                        
            
<div id="main" class="aui-page-panel">
    <div id="main-header">
        
        
    

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                                        
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                                            </li>
<li id="ellipsis" title="Show all breadcrumbs"><span><strong>…</strong></span></li>
                                                
                        
        <li class="hidden-crumb">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                                    
                        
        </li>
<li class="hidden-crumb">
                        
                            <span class=""><a href="BrightScript+Component+Reference.html">BrightScript Component Reference</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="Interfaces.html">Interfaces</a></span>
                                                    </li>
</ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="ifHttpAgent.html">ifHttpAgent</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        













    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        


        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="1611295">
        </fieldset>

                            
    

                    

        
        <a href="ifHttpAgent.html#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a id="content-metadata-page-restrictions-hidden" href="ifHttpAgent.html#" rel="nofollow" class="hidden" title="Unrestricted">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="../~jbush.html" class="url fn">Jeff Bush</a></span>, last modified by <span class="editor">     <a href="../~kcooper.html" class="url fn">Kevin Cooper</a></span> on <a class="last-modified" title="Show changes" href="https://sdkdocs.roku.com/pages/diffpagesbyversion.action?pageId=1611329&amp;selectedPageVersions=4&amp;selectedPageVersions=5">Jul 05, 2015</a>
                </li>
        </ul>
    </div>


<a href="ifHttpAgent.html#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <p>The ifHttpAgent methods modify the way that URLs are accessed.</p>
<h2 id="ifHttpAgent-Implementedby">Implemented by</h2>
<ul>
<li><a href="roAppManager.html">roAppManager</a></li>
<li><a href="roAudioPlayer.html">roAudioPlayer</a></li>
<li><a href="roGridScreen.html">roGridScreen</a></li>
<li><a href="roImageCanvas.html">roImageCanvas</a></li>
<li><a href="roListScreen.html">roListScreen</a></li>
<li><a href="roParagraphScreen.html">roParagraphScreen</a></li>
<li><a href="roPosterScreen.html">roPosterScreen</a></li>
<li><a href="roSlideShow.html">roSlideShow</a></li>
<li><a href="roSpringboardScreen.html">roSpringboardScreen</a></li>
<li><a href="roTextScreen.html">roTextScreen</a></li>
<li><a href="roTextureRequest.html">roTextureRequest</a></li>
<li><a href="roUrlTransfer.html">roUrlTransfer</a></li>
<li><a href="roVideoPlayer.html">roVideoPlayer</a></li>
<li><a href="roVideoScreen.html">roVideoScreen</a></li>
</ul>
<h2 id="ifHttpAgent-SupportedMethods">Supported Methods</h2>
<p></p>
<div class="toc-macro client-side-toc-macro  conf-macro output-block" data-hasbody="false" data-headerelements="H4" data-macro-name="toc"> </div>
<h2 id="ifHttpAgent-DescriptionofMethods">Description of Methods</h2>
<h4 id="ifHttpAgent-AddHeader(nameasString,valueasString)asBoolean">AddHeader(name as String, value as String) as Boolean</h4>
<p>Add the specified HTTP header to the list of headers that will be sent in the HTTP request.</p>
<p>Certain well known headers such as User-Agent, Content-Length, etc. will automatically be sent.  The application may override these well known values if needed (e.g. some servers may require a specific user agent string).</p>
<p>If "x-roku-reserved-dev-id" is passed as a name, the value parameter is ignored and in its place, the devid of the currently running channel is used as the value. This allows the developer's server to know which client app is talking to it.  Any other headers whose name begins with "x-roku-reserved-" are reserved and may not be set.</p>
<h4 id="ifHttpAgent-SetHeaders(nameValueMapasObject)asBoolean">SetHeaders(nameValueMap as Object) as Boolean</h4>
<p>nameValueMap should be an <a href="roAssociativeArray.html">roAssociativeArray</a>.  Each name/value in the AA is added as an HTTP header.</p>
<p>Header limitations specified in AddHeader() still apply.</p>
<h4 id="ifHttpAgent-InitClientCertificates()asBoolean">InitClientCertificates() as Boolean</h4>
<p>Initialize the object to send the Roku client certificate.</p>
<h4 id="ifHttpAgent-SetCertificatesFile(pathasString)asBoolean">SetCertificatesFile(path as String) as Boolean</h4>
<p>Set the certificates file used for SSL to the .pem file specified. The .pem file should include the CA (certificate authority) certificate that signed the certificate installed on your web server. This enables authentication of your server.</p>
<p>Instances of <a href="roUrlTransfer.html">roUrlTransfer</a> and ifHttpAgent components should call this function before performing https requests.</p>
<p>The appropriate certificates file should be placed at the location specified in the SetCertificatesFile() function call.</p>
<h4 id="ifHttpAgent-SetCertificatesDepth(depthasInteger)asVoid">SetCertificatesDepth(depth as Integer) as Void</h4>
<p>Set the maximum depth of the certificate chain that will be accepted.</p>
<h4 id="ifHttpAgent-EnableCookies()asVoid">EnableCookies() as Void</h4>
<p>Causes any Set-Cookie headers returned from the request to be interpreted and the resulting cookies to be added to the cookie cache.  This function is not available in the 3.1 firmware version.</p>
<h4 id="ifHttpAgent-GetCookies(domainasString,pathasString)asObject">GetCookies(domain as String, path as String) as Object</h4>
<p>Returns any cookies from the cookie cache that match the specified domain and path.  If domain is an empty string, all domains are matched.  Any expired cookies are not returned.  The returned object is an roArray of roAssociativeArrays.  Each AA contains the keys:</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd">Version</td>
<td class="confluenceTd">Integer</td>
<td colspan="1" class="confluenceTd">Cookie version number</td>
</tr>
<tr>
<td class="confluenceTd">Domain</td>
<td class="confluenceTd">String</td>
<td colspan="1" class="confluenceTd">Domain to which cookie applies</td>
</tr>
<tr>
<td class="confluenceTd">Path</td>
<td class="confluenceTd">String</td>
<td colspan="1" class="confluenceTd">Path to which cookie applies</td>
</tr>
<tr>
<td class="confluenceTd">Name</td>
<td class="confluenceTd">String</td>
<td colspan="1" class="confluenceTd">Name of the cookie</td>
</tr>
<tr>
<td class="confluenceTd">Value</td>
<td class="confluenceTd">String</td>
<td colspan="1" class="confluenceTd">Value of the cookie</td>
</tr>
<tr>
<td class="confluenceTd">Expires</td>
<td class="confluenceTd">roDateTime</td>
<td colspan="1" class="confluenceTd">Cookie expiration date, if any</td>
</tr>
</tbody></table></div>
<h4 id="ifHttpAgent-AddCookies(cookiesasObject)asBoolean">AddCookies(cookies as Object) as Boolean</h4>
<p>cookies should be an roArray of roAssociativeArrays.  Each AA should be in the same format as the AAs returned by GetCookie().  The specified cookies are added to the cookie cache.</p>
<h4 id="ifHttpAgent-ClearCookies()asVoid">ClearCookies() as Void</h4>
<p>Removes all cookies from the cookie cache.</p>
<h2 id="ifHttpAgent-ServerSideConfigurationofSSLMutualAuthenticationonApache">Server Side Configuration of SSL Mutual Authentication on Apache</h2>
<p> </p>
<ol>
<li>Create a Self-Signed CA (Certificate Authority) root Certificate<ol>
<li>Create the CA private key (remember the password chosen):<br>sudo openssl genrsa -out /opt/openssl/testCA/CA/testCA.KEY</li>
<li>Create CA Certificate Request:<br>sudo openssl req -new -key /opt/openssl/testCA/CA/testCA.KEY -out /opt/openssl/testCA/CA/testCA.CSR</li>
<li>Self-sign the CA certificate:<br>sudo openssl x509 -req -days 3650 -in /opt/openssl/testCA/CA/testCA.CSR -out /opt/openssl/testCA/CA/testCA.CRT \<br>/opt/openssl/testCA/CA/testCA.KEY</li>
</ol>
</li>
<li>OpenSSL Server Cert<ol>
<li>Create the Web Server's key (remember the password chosen):<br>sudo openssl genrsa -des3 -out /opt/openssl/testCA/server/keys/testWEB.KEY </li>
<li>Create the Web Server's Cert Req:<br>sudo openssl req -new -key /opt/openssl/testCA/server/keys/testWEB.KEY -out \ /opt/openssl/testCA/server/requests/testWEB.CSR</li>
<li>Sign the Web Server's Cert Req with the CA Cert:<br>sudo openssl ca -in /opt/openssl/testCA/server/requests/testWEB.CSR -cert /opt/openssl/testCA/CA/testCA.CRT -keyfile \ /opt/openssl/testCA/CA/testCA.KEY -out /opt/openssl/testCA/server/certificates/testWEB.CRT</li>
</ol>
</li>
<li>Install Cert in Apache<ol>
<li>sudo mkdir /etc/httpd/certs</li>
<li>sudo cp /opt/openssl/testCA/server/certificates/testWEB.CRT /etc/httpd/certs</li>
<li>sudo cp /opt/openssl/testCA/server/keys/testWEB.KEY /etc/httpd/certs</li>
<li>sudo cp sudo cp /opt/openssl/testCA/CA/testCA.CRT /etc/httpd/certs</li>
<li>If you don't want to enter the passwd for testWEB every time Apache starts, you can remove the passwd from the keyfile:<br>sudo cp /etc/httpd/certs/testWEB.KEY /etc/httpd/certs/testWEB.KEY.orig<br>sudo openssl rsa -in /etc/httpd/certs/testWEB.KEY.orig -out /etc/httpd/certs/testWEB.KEY</li>
<li>Edit /etc/httpd/conf.d/ssl.conf<br># Configure your server cert:<br>SSLCertificateFile /etc/httpd/certs/testWEB.CRT<br>SSLCertificateKeyFile /etc/httpd/certs/testWEB.KEY<br># Configure client cert authentication:<br>SSLCACertificateFile /etc/httpd/certs/cacert.pem<span class="Apple-tab-span" style="white-space: pre;"> </span># from roku sdk<br>SSLVerifyClient require<br>SSLVerifyDepth 1</li>
<li>Edit /etc/httpd/conf/httpd.conf: <br># In &lt;Directory&gt; &lt;/Directory&gt; tags where your video resides:<br>#<br># Checking the x-roku-reserved-dev-id header value assures that it is<br># your package trying to connect to this directory.<br># <br># You can find the dev-id of your brightscript package by going to the <br># developer page on your Roku box, and selecting "Utilities".<br># On the "Utilities" page, select "Choose File", enter the passwd for that pkg, and hit "Inspect"<br># Copy the value for the "Dev ID:" parameter and paste it here:<br>SetEnvIf x-roku-reserved-dev-id 6bb22ba64125f6da56fa4b7d6f2199a970d06672 let_roku_in<br>SSLRequireSSL<br>Order Deny,Allow<br>Deny from all<br>Allow from env=let_roku_in</li>
<li>Restart Apache:<br>sudo service httpd restart</li>
</ol>
</li>
<li>Place your video in your Apache directory configured in step 3.g) above.</li>
<li>Modify the simplevideoplayer application to access the secure video:<ol>
<li>Add the testCA.CRT (The Certificate Authority cert) file to the <br>simplevideoplayer/source directory.</li>
<li>In the appMain.brs:displyVideo() function, change the URL and video meta-data <br>to match the video you put on your server in step 4).</li>
<li>Right before the "video.SetContent(videoclip)" line, add the following calls:<br>video.Addheader("x-roku-reserved-dev-id","")<br>video.SetCertificatesFile("pkg:/source/testCA.CRT")<br>video.InitClientCertificates()</li>
</ol>
</li>
<li>Test the authentication with and without the code in 5.c) above. If any of the three authentication methods above are ommitted you should get access denied. Note that you cannot successfully access the video until you've built a package, uploaded it to the channel store, and are running that channel via a channel code. A side-loaded developer app does not properly negotiate client certs or send the enforced dev-id value for the x-roku-reserved-dev-id header.<br><br>
</li>
</ol>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://sdkdocs.roku.com/display/sdkdoc/ifHttpAgent"
    dc:identifier="https://sdkdocs.roku.com/display/sdkdoc/ifHttpAgent"
    dc:title="ifHttpAgent"
    trackback:ping="https://sdkdocs.roku.com/rpc/trackback/1611329"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="1611329" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


            
</div>


    




    
    

    
    
    








</div>
  
    </div>
</div>


        
            
            



    </div>
</body>
</html>
