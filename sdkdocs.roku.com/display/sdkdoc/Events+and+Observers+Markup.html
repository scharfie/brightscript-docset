<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Events and Observers Markup - Roku SDK Documentation - Developer Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="https://sdkdocs.roku.com">

<meta id="atlassian-token" name="atlassian-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">


<meta id="confluence-space-key" name="confluence-space-key" content="sdkdoc">


    

    <meta name="confluence-request-time" content="1458566771218">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="6f3f47137c1b3ed14b1e16e051694721">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="1606023">
            <meta name="ajs-latest-page-id" content="1606023">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Events and Observers Markup">
            <meta name="ajs-parent-page-title" content="Scene Graph XML Tutorial">
            <meta name="ajs-parent-page-id" content="1606043">
            <meta name="ajs-space-key" content="sdkdoc">
            <meta name="ajs-space-name" content="Roku SDK Documentation">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://sdkdocs.roku.com">
            <meta name="ajs-version-number" content="5.9.1-OD-65-062">
            <meta name="ajs-build-number" content="6150">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="clc.quick.create,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://sdkdocs.roku.com/opensearch/osd.action" title="Developer Documentation">


<link type="text/css" rel="stylesheet" href="../../s/c0b179288d335d9e912667cdb75fb8d2-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css%3Fbuild-number=6150.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/css/toc-macro-client-impl/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d375ee99916b6b096207b53cf4260ab0-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css%3Fhighlightactions=true&amp;flavour=VANILLA&amp;custom-site-logo=true.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/35e02545dc3a2fc430eccbb927fe7227-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/3.7.2/_/download/batch/confluence.extra.information:information-plugin-adg-styles/confluence.extra.information:information-plugin-adg-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/31/_/styles/colors.css" media="all">
<script type="text/javascript" src="../../s/a72faf4a376b855acc1dc1b5e40829cb-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/js/batch.js%3Fatlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=6150"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/js/toc-macro-client-impl/batch.js"></script>
<script type="text/javascript" src="../../s/fd3d085a9edff5a756d242bf1bc14976-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.js%3Fanalytics-uploadable=true&amp;highlightactions=true&amp;flavour=VANILLA&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/js/theme.doc/batch.js%3Flocale=en-GB"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.js"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes.js"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init.js%3Flocale=en-GB"></script>


        
    

        
        <meta name="ajs-site-title" content="Developer Documentation">

    
    

<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZTPN7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager -->

<!-- New Relic -->

<!-- End New Relic -->

    
                <link rel="canonical" href="Events+and+Observers+Markup.html">
        <link rel="shortlink" href="https://sdkdocs.roku.com/x/h4EY">
    <meta name="wikilink" content="[sdkdoc:Events and Observers Markup]">
    <meta name="page-version" content="59">

</head>

<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id="stp-licenseStatus-banner"></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>







<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-primary">
<h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../sdkdoc.1.html"><img src="https://sdkdocs.roku.com/download/attachments/524289/atl.site.logo?version=2&amp;modificationDate=1440675577312&amp;api=v2" alt="Developer Documentation"><span class="aui-header-logo-text">Developer Documentation</span></a></h1>
<ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="https://sdkdocs.roku.com/spacedirectory/view.action" class=" aui-nav-imagelink" title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="Events+and+Observers+Markup.html#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a id="space-pages-link" href="https://sdkdocs.roku.com/pages/listpages.action?key=sdkdoc" class="    " title="Browse pages in the Roku SDK Documentation space">
        Pages
</a>
</li>
                                            <li>
    
            
<a id="space-blogposts-link" href="https://sdkdocs.roku.com/pages/viewrecentblogposts.action?key=sdkdoc" class="    " title="Browse blogs in the Roku SDK Documentation space">
        Blog
</a>
</li>
                                            <li>
    
            
<a id="space-labels-link" href="https://sdkdocs.roku.com/labels/listlabels-heatmap.action?key=sdkdoc" class="    " title="Browse labels in the Roku SDK Documentation space">
        Labels
</a>
</li>
                                            <li>
    
            
<a id="space-advanced-link" href="https://sdkdocs.roku.com/spaces/viewspacesummary.action?key=sdkdoc" class="    " title="Browse additional space functions in the Roku SDK Documentation space">
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
                        <li class="aui-buttons">
            </li>
    </ul>
</div></div>
<!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar" class="padding-div">
        

                    
    






            </div>
    <div id="splitter-content">

        

                        
            
<div id="main" class="aui-page-panel">
    <div id="main-header">
        
        
    

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                                        
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="Scene+Graph+XML+Tutorial.html">Scene Graph XML Tutorial</a></span>
                                                    </li>
</ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="Events+and+Observers+Markup.html">Events and Observers Markup</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        













    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        


        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="1606043">
        </fieldset>

                            
    

                    

        
        <a href="Events+and+Observers+Markup.html#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a id="content-metadata-page-restrictions-hidden" href="Events+and+Observers+Markup.html#" rel="nofollow" class="hidden" title="Unrestricted">
                <span>
                        
        </span>    </a>
</li>
                            <li class="page-metadata-item noprint">

    
        
                                            
    
    
    <a id="content-metadata-attachments" href="https://sdkdocs.roku.com/pages/viewpageattachments.action?pageId=1606023&amp;metadataLink=true" rel="nofollow" class="aui-icon aui-icon-small aui-iconfont-attachment" accesskey="t" title="5 attachments">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="../~breid.html" class="url fn">Bill Reid</a></span>, last modified on <a class="last-modified" title="Show changes" href="https://sdkdocs.roku.com/pages/diffpagesbyversion.action?pageId=1606023&amp;selectedPageVersions=58&amp;selectedPageVersions=59">Oct 17, 2015</a>
                </li>
        </ul>
    </div>


<a href="Events+and+Observers+Markup.html#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <div class="confluence-information-macro confluence-information-macro-note conf-macro output-block" data-hasbody="true" data-macro-name="note">
<p class="title">Beta Documentation</p>
<span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"> </span><div class="confluence-information-macro-body">The contents of this page are subject to change</div>
</div>
<hr>
<p></p>
<div class="toc-macro client-side-toc-macro  conf-macro output-block" data-csslistindent="18px" data-cssliststyle="square" data-hasbody="false" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-macro-name="toc"> </div>
<hr>
<p>As described in <a href="Scene+Graph+Reference.html"><strong>Scene Graph Reference</strong></a>, there are standard event loops and functions included in the Scene Graph API for triggering actions when certain events occur. The following are a few examples that illustrate how to perform actions in your application in response to certain events.</p>
<h1 id="EventsandObserversMarkup-ObservedFieldsMarkup">Observed Fields Markup</h1>
<p><strong>Example Application:</strong> <a href="https://sdkdocs.roku.com/download/attachments/1606023/EventObserver.zip?version=2&amp;modificationDate=1444844617168&amp;api=v2" data-linked-resource-id="1614228" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="EventObserver.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="1606023" data-linked-resource-container-version="59">EventObserver.zip</a><br><strong>Node Class Reference:</strong> <a href="Timer.html"><strong>Timer</strong></a></p>
<p>All Scene Graph objects include an <code>observeField()</code> function that can call an event handler function in response to a change in a field in the object (see <strong><a href="ifSGNodeField.html">ifSGNodeField</a></strong>). (As an alternate, the <strong>interface</strong> element also can also be used for the same purpose, as described in <a href="https://sdkdocs.roku.com/pages/viewpage.action?pageId=1608549"><strong>&lt;interface&gt;</strong></a>.) <code>EventObserver.zip</code> uses a <strong>Timer</strong> node to trigger a change in the text in the animated <strong>Label</strong> node we defined previously in <a href="Animation+Markup.html#AnimationMarkup-Vector2DFieldInterpolatorMarkup"><strong>Vector2DFieldInterpolator Markup</strong></a>.</p>
<p>If you look at the XML markup for that previous animation example and compare it to the XML markup in <code>EventObserver.zip</code>, you'll note a few changes. First, we added a <strong>Timer</strong> node at the bottom of the <strong>component</strong> node definitions:</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Timer Node XML Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: html/xml; gutter: false; theme: Confluence"><![CDATA[&lt;Timer
  id=&quot;textTimer&quot;
  repeat=&quot;true&quot;
  duration=&quot;5&quot; /&gt; ]]></script>
</div>
</div>
<p>The <strong>Timer</strong> node is defined very much the same as the <strong>Animation</strong> nodes we've worked with previously. We give it an ID, which for this particular use, is required, because we must be able to identify the node in BrightScript code embedded in the <strong>&lt;script&gt;</strong> element:</p>
<p style="margin-left: 30.0px;"><code>id="textTimer" </code></p>
<p>We also define the <code>repeat</code>, <code>duration</code>, and <code>control</code> fields in the same way as an <strong>Animation</strong> node:</p>
<p style="margin-left: 30.0px;"><code>repeat="true" </code><br><code>duration="5"</code></p>
<p>That sets the <strong>Timer</strong> node to continuously repeat a timing event every five seconds, starting as soon as the component is created. The <strong>Timer</strong> node class has an event field named <code>fire</code> (see <strong><a href="Timer.html">Timer</a></strong>) that we can now use to trigger an action in our application. All we have to do is write a little extra BrightScript code in our XML component file <strong>&lt;script&gt;</strong> element:</p>
<p> </p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Field Observer XML BrightScript Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: html/xml; gutter: false; theme: Confluence"><![CDATA[&lt;script type=&quot;text/brightscript&quot; &gt; 
&lt;![CDATA[

sub init()
  m.top.setFocus(true)
  m.bottomlabel = m.top.findNode(&quot;bottomLabel&quot;)
  m.texttimer = m.top.findNode(&quot;textTimer&quot;)

  m.defaulttext = &quot;All The Best Videos!&quot;
  m.alternatetext = &quot;All The Time!!!&quot;
  m.textchange = false
  m.texttimer.ObserveField(&quot;fire&quot;,&quot;changetext&quot;)
  m.texttimer.control = &quot;start&quot;
end sub 

sub changetext()
  if (m.textchange = false) then
    m.bottomlabel.text = m.alternatetext
    m.textchange = true
  else
    m.bottomlabel.text = m.defaulttext
    m.textchange = false
  end if
end sub 

]]&gt; 
&lt;/script&gt;]]></script>
</div>
</div>
<p>Note that we set up our event handler in the <code>init()</code> function by declaring and defining the variables and functions we'll need for the event handler.</p>
<p>First, we set the usual <code>setFocus()</code> function for the component in the  <code>init()</code> function to define the target of remote control key presses to the entire component:</p>
<p style="margin-left: 30.0px;"><code>m.top.setFocus(true)</code></p>
<p>Then we use the <code>findNode()</code> function to declare and define the component objects that will be involved in the events and subsequent actions to change the <code>bottomLabel</code> object text. This involves the <code>bottomLabel</code> object itself and the <strong>Timer</strong> node we defined:</p>
<p style="margin-left: 30.0px;"><code>m.bottomlabel = m.top.findNode("bottomLabel")</code><br><code>m.texttimer = m.top.findNode("textTimer")</code></p>
<p>Once we've got those objects defined, we can declare and define some component object options for the <code>bottomLabel</code> object text:</p>
<p style="margin-left: 30.0px;"><code>m.defaulttext = "All The Best Videos!"</code><br><code>m.alternatetext = "All The Time!!!"</code></p>
<p>Now we've got two text strings to potentially use as the definition of the <code>bottomLabel</code> object <code>text</code> field. Since we are going to alternate between the two text strings, we declare and define a Boolean variable to control which one is used:</p>
<p style="margin-left: 30.0px;"><code>m.textchange = false</code></p>
<p>And now we're ready to define the <code>ObserveField()</code> function of the timer. We define the timer field to observe for change to be the <code>fire</code> field, and the event handler function to call when the field changes to be <code>changetext()</code>:</p>
<p style="margin-left: 30.0px;"><code>m.texttimer.ObserveField("fire","changetext")</code></p>
<p>As with other node classes that have a <code>control</code> field or similar, we have to begin operation of the node in BrightScript:</p>
<p style="margin-left: 30.0px;"><code>m.texttimer.control = "start"</code></p>
<p>Of course, now we have to write the actual <code>changetext()</code> event handler:</p>
<p style="margin-left: 30.0px;"><code> sub changetext()</code><br><code>  if (m.textchange = false) then</code><br><code>    m.bottomlabel.text = m.alternatetext<br>    </code><code>m.textchange = true<br>  </code><code>else<br>    </code><code>m.bottomlabel.text = m.defaulttext<br>    </code><code>m.textchange = false<br>  </code><code>end if<br></code><code>end sub</code></p>
<p>That's a typical piece of code to handle that type of action, switching back and forth between the two text strings every five seconds. And since this is a modification of our <strong>Label</strong> node animation example from before, where the <code>bottomLabel</code> object changed direction every five seconds, this example also changes the text string at about the same time the text changes direction:</p>
<p style="margin-left: 60.0px;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://sdkdocs.roku.com/download/attachments/1606023/eventobserver.jpg?version=2&amp;modificationDate=1445105859788&amp;api=v2" data-image-src="/download/attachments/1606023/eventobserver.jpg?version=2&amp;modificationDate=1445105859788&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="3736882" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="eventobserver.jpg" data-base-url="https://sdkdocs.roku.com" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="1606023" data-linked-resource-container-version="59"></span></p>
<p><strong><u>Animation</u><br>key (time)</strong>                   0.0 (0 seconds)/1.0 (10 seconds)       0.5 (5 seconds) <br><strong>keyValue</strong>                    160,620                                               620,620<br><strong><u>Timer</u> <br>fire (time)                    </strong>(0 seconds,10 seconds,...)                 (5 seconds, 15 seconds,...)</p>
<p>Again, as in <a href="Animation+Markup.html#AnimationMarkup-Vector2DFieldInterpolatorMarkup"><strong>Vector2DFieldInterpolator Markup</strong></a>, you can watch the text scroll back and forth and change over and over and over again...</p>
<h1 id="EventsandObserversMarkup-KeyEventsMarkup">Key Events Markup</h1>
<p><strong>Example Application:</strong> <a href="https://sdkdocs.roku.com/download/attachments/1606023/KeyEvents.zip?version=2&amp;modificationDate=1444844652227&amp;api=v2" data-linked-resource-id="1614077" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="KeyEvents.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="1606023" data-linked-resource-container-version="59">KeyEvents.zip</a><br><strong>Scene Graph References:</strong> <a href="https://sdkdocs.roku.com/pages/viewpage.action?pageId=1608550"><strong>&lt;script&gt;</strong></a>, <strong><a href="https://sdkdocs.roku.com/pages/viewpage.action?pageId=1608547">onKeyEvent()</a></strong></p>
<p>Pressing the keys on the Roku remote control generate specific events for each key, as well as a general event when any key is pressed. This gives you full control to initiate actions in your Scene Graph application in response to remote control key presses, many times in the <strong>&lt;script&gt;</strong> element of a Scene Graph XML component file (see <strong><a href="https://sdkdocs.roku.com/pages/viewpage.action?pageId=1608550">&lt;script&gt;</a></strong>). The Scene Graph API includes a special function, <code>onKeyEvent()</code>, that can be embedded into the <strong>&lt;script&gt;</strong> element to control the component defined in the XML file (see <a href="https://sdkdocs.roku.com/pages/viewpage.action?pageId=1608547"><strong>onKeyEvent()</strong></a>).</p>
<p>In this example, we use the <span style="color: rgb(128,0,128);"><strong>OK</strong></span> key on the remote to hide and show a simple Label component.  The Label component is defined as:</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Warning Label Node XML Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: html/xml; gutter: false; theme: Confluence"><![CDATA[&lt;Label 
	id=&quot;myLabel&quot;
	visible=&quot;true&quot;
	height=&quot;60&quot;
    width=&quot;0&quot;
	text = &quot;Press OK to Turn Hide&quot;
	horizAlign = &quot;left&quot;
	vertAlign = &quot;center&quot;
	translation=&quot;[250,100]&quot; /&gt;]]></script>
</div>
</div>
<p><span style="line-height: 13.0pt;font-size: 10.0pt;">Next we implement the </span><code style="line-height: 13.0pt;font-size: 10.0pt;">onKeyEvent()</code><span style="line-height: 13.0pt;font-size: 10.0pt;"> function that will handle the remote key press events.  Specifically, the event handler will respond to <span style="color: rgb(128,0,128);"><strong>OK</strong></span> key presses by hiding and showing the Label:</span></p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>onKeyEvent() Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[function onKeyEvent(key as String, press as Boolean) as Boolean
    handled = false
    if press then
        if (key = &quot;OK&quot;) then 
            if (m.myLabel.visible = true)
                m.myLabel.visible = false
            else
                m.myLabel.visible = true
            endif
            handled = true
        end if
    end if
    return handled
end function]]></script>
</div>
</div>
<p>There's a few important things to note in this event handler function definition. First, the function returns an event handled message to the firmware (note <code>return handled</code> at the bottom of the function), and by default we want to make sure the message is false (the remote key press event has not been handled), to avoid any possibility that the firmware will prevent further action of the application, or the user to control the application. So we explicitly set the message to be false at the top of the function:</p>
<p style="margin-left: 30.0px;"><code>handled = false</code></p>
<p>We only want to set <code>handled</code> to true when we are sure we have handled the key press event correctly. This all typically takes place in an <code>if press then</code> conditional statement block as above, which handles the general key press event.</p>
<p><span style="line-height: 13.0pt;font-size: 10.0pt;">Remember from the </span><strong><a href="Scene+Graph+XML+Guide.html">Scene Graph XML Guide</a></strong><span style="line-height: 13.0pt;font-size: 10.0pt;"> that any events that are not handled by any node in the Scene Graph scene are automatically are handled by default at the top of the Scene Graph.</span></p>
<p>The main event handling is done in the conditional code block that detects the <span style="color: rgb(128,0,128);"><strong>OK</strong></span> key press. On each <span style="color: rgb(128,0,128);"><strong>OK</strong></span> key press, the code checks the visibility state of the Label component, and toggles visibility according to the current state:</p>
<pre>        if (key = "OK") then <br>            if (m.myLabel.visible = true)<br>                m.myLabel.visible = false<br>            else<br>                m.myLabel.visible = true<br>            endif<br>            handled = true<br>        end if</pre>
<p><span style="line-height: 13.0pt;font-size: 10.0pt;">When we're sure we've handled the remote key press event correctly, that's when we set </span><code style="line-height: 13.0pt;font-size: 10.0pt;">handled</code><span style="line-height: 13.0pt;font-size: 10.0pt;"> to true:</span></p>
<p style="margin-left: 30.0px;"><span style="font-family: Courier New;">handled = true</span></p>
<p>If you haven't done this already, download and side-load <code>KeyEvents.zip</code>, and press the <span style="color: rgb(128,0,128);"><strong>OK</strong></span> key repeatedly.</p>
<p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://sdkdocs.roku.com/download/attachments/1606023/keyevents.jpg?version=2&amp;modificationDate=1445106259996&amp;api=v2" data-image-src="/download/attachments/1606023/keyevents.jpg?version=2&amp;modificationDate=1445106259996&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="1614062" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="keyevents.jpg" data-base-url="https://sdkdocs.roku.com" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="1606023" data-linked-resource-container-version="59"></span></p>
<p> </p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://sdkdocs.roku.com/display/sdkdoc/Events+and+Observers+Markup"
    dc:identifier="https://sdkdocs.roku.com/display/sdkdoc/Events+and+Observers+Markup"
    dc:title="Events and Observers Markup"
    trackback:ping="https://sdkdocs.roku.com/rpc/trackback/1606023"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="1606023" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


            
</div>


    




    
    

    
    
    








</div>
  
    </div>
</div>


        
            
            



    </div>
</body>
</html>
