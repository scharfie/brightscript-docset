<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Trick Mode Support - Roku SDK Documentation - Developer Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="https://sdkdocs.roku.com">

<meta id="atlassian-token" name="atlassian-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">


<meta id="confluence-space-key" name="confluence-space-key" content="sdkdoc">


    

    <meta name="confluence-request-time" content="1458566943916">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="6f3f47137c1b3ed14b1e16e051694721">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="3737253">
            <meta name="ajs-latest-page-id" content="3737253">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Trick Mode Support">
            <meta name="ajs-parent-page-title" content="Video Streaming">
            <meta name="ajs-parent-page-id" content="3737049">
            <meta name="ajs-space-key" content="sdkdoc">
            <meta name="ajs-space-name" content="Roku SDK Documentation">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://sdkdocs.roku.com">
            <meta name="ajs-version-number" content="5.9.1-OD-65-062">
            <meta name="ajs-build-number" content="6150">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="clc.quick.create,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://sdkdocs.roku.com/opensearch/osd.action" title="Developer Documentation">


<link type="text/css" rel="stylesheet" href="../../s/c0b179288d335d9e912667cdb75fb8d2-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css%3Fbuild-number=6150.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/css/toc-macro-client-impl/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d375ee99916b6b096207b53cf4260ab0-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css%3Fhighlightactions=true&amp;flavour=VANILLA&amp;custom-site-logo=true.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/35e02545dc3a2fc430eccbb927fe7227-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/31/_/styles/colors.css" media="all">
<script type="text/javascript" src="../../s/a72faf4a376b855acc1dc1b5e40829cb-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/js/batch.js%3Fatlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=6150"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/js/toc-macro-client-impl/batch.js"></script>
<script type="text/javascript" src="../../s/fd3d085a9edff5a756d242bf1bc14976-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.js%3Fanalytics-uploadable=true&amp;highlightactions=true&amp;flavour=VANILLA&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/js/theme.doc/batch.js%3Flocale=en-GB"></script>


        
    

        
        <meta name="ajs-site-title" content="Developer Documentation">

    
    

<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZTPN7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager -->

<!-- New Relic -->

<!-- End New Relic -->

    
                <link rel="canonical" href="Trick+Mode+Support.html">
        <link rel="shortlink" href="https://sdkdocs.roku.com/x/pQY5">
    <meta name="wikilink" content="[sdkdoc:Trick Mode Support]">
    <meta name="page-version" content="3">

</head>

<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id="stp-licenseStatus-banner"></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>







<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-primary">
<h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../sdkdoc.1.html"><img src="https://sdkdocs.roku.com/download/attachments/524289/atl.site.logo?version=2&amp;modificationDate=1440675577312&amp;api=v2" alt="Developer Documentation"><span class="aui-header-logo-text">Developer Documentation</span></a></h1>
<ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="https://sdkdocs.roku.com/spacedirectory/view.action" class=" aui-nav-imagelink" title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="Trick+Mode+Support.html#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a id="space-pages-link" href="https://sdkdocs.roku.com/pages/listpages.action?key=sdkdoc" class="    " title="Browse pages in the Roku SDK Documentation space">
        Pages
</a>
</li>
                                            <li>
    
            
<a id="space-blogposts-link" href="https://sdkdocs.roku.com/pages/viewrecentblogposts.action?key=sdkdoc" class="    " title="Browse blogs in the Roku SDK Documentation space">
        Blog
</a>
</li>
                                            <li>
    
            
<a id="space-labels-link" href="https://sdkdocs.roku.com/labels/listlabels-heatmap.action?key=sdkdoc" class="    " title="Browse labels in the Roku SDK Documentation space">
        Labels
</a>
</li>
                                            <li>
    
            
<a id="space-advanced-link" href="https://sdkdocs.roku.com/spaces/viewspacesummary.action?key=sdkdoc" class="    " title="Browse additional space functions in the Roku SDK Documentation space">
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
                        <li class="aui-buttons">
            </li>
    </ul>
</div></div>
<!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar" class="padding-div">
        

                    
    






            </div>
    <div id="splitter-content">

        

                        
            
<div id="main" class="aui-page-panel">
    <div id="main-header">
        
        
    

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                                        
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                                            </li>
<li id="ellipsis" title="Show all breadcrumbs"><span><strong>…</strong></span></li>
                                                
                        
        <li class="hidden-crumb">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                                    
                        
        </li>
<li class="hidden-crumb">
                        
                            <span class=""><a href="Developer+Guide.html">Developer Guide</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="Video+Streaming.html">Video Streaming</a></span>
                                                    </li>
</ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="Trick+Mode+Support.html">Trick Mode Support</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        













    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        


        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="3737049">
        </fieldset>

                            
    

                    

        
        <a href="Trick+Mode+Support.html#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a id="content-metadata-page-restrictions-hidden" href="Trick+Mode+Support.html#" rel="nofollow" class="hidden" title="Unrestricted">
                <span>
                        
        </span>    </a>
</li>
                            <li class="page-metadata-item noprint">

    
        
                                            
    
    
    <a id="content-metadata-attachments" href="https://sdkdocs.roku.com/pages/viewpageattachments.action?pageId=3737253&amp;metadataLink=true" rel="nofollow" class="aui-icon aui-icon-small aui-iconfont-attachment" accesskey="t" title="10 attachments">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="../~breid.html" class="url fn">Bill Reid</a></span>, last modified by <span class="editor">     <a href="../~rburdick.html" class="url fn">Robert Burdick</a></span> on <a class="last-modified" title="Show changes" href="https://sdkdocs.roku.com/pages/diffpagesbyversion.action?pageId=3737253&amp;selectedPageVersions=2&amp;selectedPageVersions=3">Mar 16, 2016</a>
                </li>
        </ul>
    </div>


<a href="Trick+Mode+Support.html#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <hr>
<p></p>
<div class="toc-macro client-side-toc-macro  conf-macro output-block" data-csslistindent="18px" data-cssliststyle="square" data-hasbody="false" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-macro-name="toc"> </div>
<hr>
<p>Two types of trick mode support (FF/REW/SEEK) are provided. For developers who generate and publish image archives in the Roku BIF (Base Index Frame) file format, scene-based trick-mode using index frames will be supported. A specification is available below which details the BIF file format and data required. If this data is published and available for a given title, scene-based trick-modes will be available. The content meta-data indicates the availability of this data on a per title basis by providing URLs for the HD and SD versions of these assets. </p>
<p>In cases where the BIF file is either not supported or unavailable, the system will present a time-based method of supporting trick modes. The user will be presented with a progress bar showing their location in the show and be allowed to seek using the normal trick play controls. Since scene information is not available, the user will only have a visual timeline and numeric time information to locate their desired position in the movie. Once the new location is selected, the system will buffer a minimal amount of stream data and begin playback.</p>
<h2 id="TrickModeSupport-BIFFileCreation">BIF File Creation</h2>
<p>You can create BIF file archives using several tools, including the latest Roku <code>biftool</code> (see <a href="Trick+Mode+Support.html#TrickModeSupport-Rokubiftool">Roku biftool</a>). The following is general information for creating BIF archives using available tools. </p>
<p>You'll likely want to generate two .bif archives for each piece of content, one for SD and one for HD. Which archive is used depends not on the resolution of the content, but on the resolution of the user UI. That's why it's important to generate HD .bif archives even if the content is SD. However, if there is no HD .bif available, the player will fallback to using the SD .bif.</p>
<p>So here's one way to generate them:</p>
<p style="margin-left: 30.0px;"><code>% mkdir abc-sd abc-hd <br></code> <code> % ffmpeg -i abc.mp4 -r .1 -s 240x180 abc-sd/<br>%08d.jpg </code> <code> <br>% ffmpeg -i abc.mp4 -r .1 -s 320x240 abc-hd/<br>%08d.jpg <br></code> <code> % biftool -t 10000 abc-sd </code> <code> <br>% biftool -t 10000 abc-hd</code></p>
<p>This will result in two new files: abc-sd.bif and abc-hd.bif</p>
<p>There are two caveats here:</p>
<ul><li>ffmpeg generates the .jpg files starting with index 1. This means that all the timestamps will be off by 10 seconds. To fix, use:</li></ul>
<p style="margin-left: 60.0px;"><code>% j=00000000.jpg; for i in *; do mv ${i} ${j}; j=${i}; done;</code></p>
<ul><li>the SD frames should have a width of 240 and the HD frames should have a width of 320. Their height should be specified to coincide with their aspect ratio. The commands above assume a 4x3 aspect ratio. Unfortunately, ffmpeg doesn't let you specify only a width, keeping the original aspect ratio. If your source file is not 4:3, you should calculate the height used in the commands above using the width and the aspect ratio.</li></ul>
<h2 id="TrickModeSupport-Rokubiftool">Roku biftool</h2>
<h3 id="TrickModeSupport-Prerequisites">Prerequisites</h3>
<p><strong style="line-height: 1.42857;">Download and Unzip:</strong> <a href="https://sdkdocs.roku.com/download/attachments/3737253/biftool.zip?version=1&amp;modificationDate=1458163683169&amp;api=v2" data-linked-resource-id="4260298" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="biftool.zip" data-nice-type="Zip Archive" data-linked-resource-content-type="application/zip" data-linked-resource-container-id="3737253" data-linked-resource-container-version="3">biftool.zip</a></p>
<p><strong>Supporting Applications</strong>: <code>ffmpeg-lib</code></p>
<p>The executables are compiled for Linux x86 64-bit machines. Both the <code>biftool</code> and <code>biftool_processor</code> executables must be installed in the same directory on the development machine. The development machine must also have the <code>ffmpeg-lib</code> package installed. On RedHat and Fedora Core, you can typically install <code>ffmpeg-lib</code> by running this <strong><code>yum</code></strong> command as root:</p>
<p style="margin-left: 30.0px;"><code># <strong>yum</strong> install ffmpeg-libs</code></p>
<h3 id="TrickModeSupport-Synopsis">Synopsis</h3>
<p style="margin-left: 30.0px;"><code><strong>biftool</strong> <em>options</em> <em>target</em>...</code></p>
<h3 id="TrickModeSupport-Description">Description</h3>
<p>The available options are:</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">Option | Alternate</th>
<th class="confluenceTh">Description</th>
</tr>
<tr>
<td class="confluenceTd">-t | --timestamp-multiplier</td>
<td class="confluenceTd">The absolute presentation timestamp (PTS) in milliseconds is the filename multiplied by this value.</td>
</tr>
<tr>
<td class="confluenceTd">-v | --verbose</td>
<td class="confluenceTd">Be verbose about activity.</td>
</tr>
<tr>
<td class="confluenceTd">-h | --help</td>
<td class="confluenceTd">Help message.</td>
</tr>
</tbody></table></div>
<p>Three types of target are allowed:</p>
<ul>
<li>A single target, which is a directory. All files in the directory will be archived into single BIF file with the same name as the directory.</li>
<li>A single target, which is a file with a <code>.bif</code> suffix. The contents of the file will be extracted into a new directory with the same name as the file. For example, extracting <code>mymovie-hd.bif</code> will create and populate a directory named <code>mymovie-hd</code>.</li>
<li>One or more targets, which are files that do not have a <code>.bif</code> suffix. These files are assumed to be video files, such as <code>mkv</code>, <code>mp4</code>, and <code>ts</code> files. Frames are extracted from the first video stream in each file, to create a single <code>.bif</code> file with the same base name as the first video file specified. If more than one video file is specified, they are expected to be segments of the same video and must be specified in playback order, based on the presentation timestamps (PTS) within the files.</li>
</ul>
<h3 id="TrickModeSupport-Example">Example</h3>
<p style="margin-left: 30.0px;"><code>$ biftool ~/public_html/Movies/HarryPotter/HLS/600000/*.ts<br></code><code>Finding candidate frames in 917 files <br>Detected stream PTS offset of 10033ms <br>Captured 2368 candidate frames in 79s <br>Selected 915 BIFs <br>Success: ./fileSequence0000-fhd.bif (size=14.096MiB, numImages=915, avgSize=15.767KiB) <br>Success: ./fileSequence0000-hd.bif (size=8.528MiB, numImages=915, avgSize=9.535KiB) <br>Success: ./fileSequence0000-sd.bif (size=3.920MiB, numImages=915, avgSize=4.378KiB)<br>$ </code></p>
<h2 id="TrickModeSupport-BIFFileSpecification">BIF File Specification</h2>
<p>The following specification describes the implementation of the BIF (Base Index Frames) file archive. The BIF archive is used to encapsulate a set of still images for supporting video trick modes (e.g. FF/REW) on the Roku Streaming Player. This format has been optimized for the usage pattern inherent in this model and is well-suited and capable of facilitating those patterns in an efficient manner.</p>
<h3 id="TrickModeSupport-RequirementsandUsagePatterns">Requirements and Usage Patterns</h3>
<p>It is important that the file format have the following features:</p>
<ul>
<li>It must be easy to find and interpret the archive metadata.</li>
<li>It must be network-access friendly.</li>
<li>It must minimize levels of indirection.</li>
<li>It must be compact.</li>
<li>It must easily accommodate the entire range of possible data.</li>
</ul>
<p>The format should also be capable of providing future extensions should they be needed.</p>
<h3 id="TrickModeSupport-Conventions">Conventions</h3>
<p>This specification assumes that all values are stored little-endian. </p>
<h3 id="TrickModeSupport-FileFormat">File Format</h3>
<p>All multibyte integers are stored in little-endian format. That is, the first byte is the least significant byte and the last byte is the most significant.</p>
<h4 id="TrickModeSupport-MagicNumber">Magic Number</h4>
<p><span>This is a file identifier. It contains enough information to identify the file type uniquely. </span></p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">byte</th>
<th style="text-align: center;" class="confluenceTh">0</th>
<th style="text-align: center;" class="confluenceTh">1</th>
<th style="text-align: center;" class="confluenceTh">2</th>
<th style="text-align: center;" class="confluenceTh">3</th>
<th style="text-align: center;" class="confluenceTh">4</th>
<th style="text-align: center;" class="confluenceTh">5</th>
<th style="text-align: center;" class="confluenceTh">6</th>
<th colspan="1" style="text-align: center;" class="confluenceTh">7</th>
</tr>
<tr>
<th class="confluenceTh">value</th>
<td class="confluenceTd"><code>0x89</code></td>
<td class="confluenceTd"><code>0x42</code></td>
<td class="confluenceTd"><code>0x49</code></td>
<td class="confluenceTd"><code>0x46</code></td>
<td class="confluenceTd"><code>0x0d</code></td>
<td class="confluenceTd"><code>0x0a</code></td>
<td class="confluenceTd"><code>0x1a</code></td>
<td colspan="1" class="confluenceTd"><code>0x0a</code></td>
</tr>
</tbody></table></div>
<h4 id="TrickModeSupport-Version">Version</h4>
<p>This space is reserved for a revision number. The current specification is file format version 0. The value should be incremented for non-backward-compatible revisions of this document.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">byte</th>
<th style="text-align: center;" class="confluenceTh"> 8</th>
<th style="text-align: center;" class="confluenceTh"> 9</th>
<th style="text-align: center;" class="confluenceTh"> 10</th>
<th style="text-align: center;" class="confluenceTh">11</th>
</tr>
<tr>
<th class="confluenceTh">value</th>
<td colspan="4" style="text-align: center;margin-left: 30.0px;" class="confluenceTd"><em><code>Version</code></em></td>
</tr>
</tbody></table></div>
<h4 id="TrickModeSupport-NumberofBIFimages">Number of BIF images</h4>
<p>This is an unsigned 32-bit value (N) that represents the number of BIF images in the file. The number of entries in the index will be N+1, including the end-of-data entry.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">byte</th>
<th style="text-align: center;" class="confluenceTh">12</th>
<th style="text-align: center;" class="confluenceTh">13</th>
<th style="text-align: center;" class="confluenceTh">14</th>
<th style="text-align: center;" class="confluenceTh">15</th>
</tr>
<tr>
<th class="confluenceTh">value</th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>Number of BIF images (N)</code></em></td>
</tr>
</tbody></table></div>
<h4 id="TrickModeSupport-FramewiseSeparation">Framewise Separation</h4>
<p>This specifies the denomination of the frame timestamp values. In order to obtain the "real" timestamp (in milliseconds) of a frame, this value is multiplied by the timestamp entry in the BIF index.  If this value is 0, the timestamp multiplier shall be 1000 milliseconds.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">byte</th>
<th style="text-align: center;" class="confluenceTh">16</th>
<th style="text-align: center;" class="confluenceTh">17</th>
<th style="text-align: center;" class="confluenceTh">18</th>
<th style="text-align: center;" class="confluenceTh">19</th>
</tr>
<tr>
<th class="confluenceTh">value</th>
<td colspan="4" style="text-align: center;" class="confluenceTd">
<code>Timestamp Multiplier</code><br>(in milliseconds)</td>
</tr>
</tbody></table></div>
<h4 id="TrickModeSupport-Reserved">Reserved</h4>
<p>These bytes are reserved for future expansion. They shall be 0.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">byte</th>
<th colspan="4" style="text-align: center;" class="confluenceTh">20     ...     63</th>
</tr>
<tr>
<th class="confluenceTh">value</th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><code>0x00 / / 0x00 </code></td>
</tr>
</tbody></table></div>
<h4 id="TrickModeSupport-BIFindex">BIF index</h4>
<p>This space is used for the BIF index entries. There are N+1 entries. Each entry contains two unsigned 32-bit values.</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh">byte</th>
<th style="text-align: center;" class="confluenceTh">64</th>
<th style="text-align: center;" class="confluenceTh">65</th>
<th style="text-align: center;" class="confluenceTh">66</th>
<th style="text-align: center;" class="confluenceTh">67</th>
<th style="text-align: center;" class="confluenceTh">68</th>
<th style="text-align: center;" class="confluenceTh">69</th>
<th style="text-align: center;" class="confluenceTh">70</th>
<th colspan="1" style="text-align: center;" class="confluenceTh">71</th>
</tr>
<tr>
<th class="confluenceTh"><p>index 0</p></th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>Frame 0 timestamp</code></em></td>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>absolute offset of frame</code></em></td>
</tr>
<tr>
<th colspan="1" class="confluenceTh">index 1 </th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>Frame 1 timestamp</code></em></td>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>absolute offset of frame</code></em></td>
</tr>
<tr>
<th colspan="1" class="confluenceTh">index 2</th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>Frame 2 timestamp</code></em></td>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>absolute offset of frame</code></em></td>
</tr>
<tr>
<th colspan="1" class="confluenceTh">...</th>
<td colspan="4" style="text-align: center;" class="confluenceTd">    </td>
<td colspan="4" style="text-align: center;" class="confluenceTd">    </td>
</tr>
<tr>
<th colspan="1" class="confluenceTh">index N-1</th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>Frame N-1 timestamp</code></em></td>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>absolute offset of frame</code></em></td>
</tr>
<tr>
<th colspan="1" class="confluenceTh">index N</th>
<td colspan="4" style="text-align: center;" class="confluenceTd"><code>0xffffffff</code></td>
<td colspan="4" style="text-align: center;" class="confluenceTd"><em><code>last byte of data + 1 </code></em></td>
</tr>
</tbody></table></div>
<p>Because the size of each BIF is determined by subtracting its offset from the offset of the next entry in the index, the BIFs shall appear in the index in the same order as they appear in the data section, and they shall be adjacent. </p>
<p>The absolute timstamps of the BIF captures can be obtained by multiplying the frame timestamp by the timestamp multiplier.</p>
<h4 id="TrickModeSupport-Datasection">Data section</h4>
<p>This section contains the BIF images. It begins after the index, though it is not necessary that the first image appear immediately after the index. Each image in the data section must begin at the offset specified in the BIF index.</p>
<p> </p>
<p> </p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://sdkdocs.roku.com/display/sdkdoc/Trick+Mode+Support"
    dc:identifier="https://sdkdocs.roku.com/display/sdkdoc/Trick+Mode+Support"
    dc:title="Trick Mode Support"
    trackback:ping="https://sdkdocs.roku.com/rpc/trackback/3737253"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="3737253" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


            
</div>


    




    
    

    
    
    








</div>
  
    </div>
</div>


        
            
            



    </div>
</body>
</html>
