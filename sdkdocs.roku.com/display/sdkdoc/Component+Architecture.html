<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Component Architecture - Roku SDK Documentation - Developer Documentation</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="https://sdkdocs.roku.com">

<meta id="atlassian-token" name="atlassian-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">


<meta id="confluence-space-key" name="confluence-space-key" content="sdkdoc">


    

    <meta name="confluence-request-time" content="1458566762273">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="6f3f47137c1b3ed14b1e16e051694721">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="3737197">
            <meta name="ajs-latest-page-id" content="3737197">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Component Architecture">
            <meta name="ajs-parent-page-title" content="BrightScript Language Reference">
            <meta name="ajs-parent-page-id" content="3737186">
            <meta name="ajs-space-key" content="sdkdoc">
            <meta name="ajs-space-name" content="Roku SDK Documentation">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://sdkdocs.roku.com">
            <meta name="ajs-version-number" content="5.9.1-OD-65-062">
            <meta name="ajs-build-number" content="6150">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="clc.quick.create,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="21a1f5b8620aee26e9099af2a2cb30f0bd6a3b67">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://sdkdocs.roku.com/opensearch/osd.action" title="Developer Documentation">


<link type="text/css" rel="stylesheet" href="../../s/c0b179288d335d9e912667cdb75fb8d2-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css%3Fbuild-number=6150.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/css/toc-macro-client-impl/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d375ee99916b6b096207b53cf4260ab0-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css%3Fhighlightactions=true&amp;flavour=VANILLA&amp;custom-site-logo=true.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/35e02545dc3a2fc430eccbb927fe7227-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/css/theme.doc/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/3.7.2/_/download/batch/confluence.extra.information:information-plugin-adg-styles/confluence.extra.information:information-plugin-adg-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/31/_/styles/colors.css" media="all">
<script type="text/javascript" src="../../s/a72faf4a376b855acc1dc1b5e40829cb-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/9/_/download/superbatch/js/batch.js%3Fatlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=6150"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/fb358127e94bd69e710c31c2f2ba1c43/_/download/contextbatch/js/toc-macro-client-impl/batch.js"></script>
<script type="text/javascript" src="../../s/fd3d085a9edff5a756d242bf1bc14976-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/97a922b416cbe43cf83e5c5ab531a613/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop,main,viewcontent,page,atl.general,atl.comments/batch.js%3Fanalytics-uploadable=true&amp;highlightactions=true&amp;flavour=VANILLA&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/96ff7b4cb8d7e0cf3843a298eef90d7a/_/download/contextbatch/js/theme.doc/batch.js%3Flocale=en-GB"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.js"></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes.js"></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6150/5f41c4ff85fd86016ba4c6b8a1bbb6bc9b81bcc3.31/2.1.8/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init.js%3Flocale=en-GB"></script>


        
    

        
        <meta name="ajs-site-title" content="Developer Documentation">

    
    

<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WZTPN7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager -->

<!-- New Relic -->

<!-- End New Relic -->

    
                <link rel="canonical" href="Component+Architecture.html">
        <link rel="shortlink" href="https://sdkdocs.roku.com/x/bQY5">
    <meta name="wikilink" content="[sdkdoc:Component Architecture]">
    <meta name="page-version" content="7">

</head>

<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout">

        
            <div id="stp-licenseStatus-banner"></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>







<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-primary">
<h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="../sdkdoc.1.html"><img src="https://sdkdocs.roku.com/download/attachments/524289/atl.site.logo?version=2&amp;modificationDate=1440675577312&amp;api=v2" alt="Developer Documentation"><span class="aui-header-logo-text">Developer Documentation</span></a></h1>
<ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="https://sdkdocs.roku.com/spacedirectory/view.action" class=" aui-nav-imagelink" title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="Component+Architecture.html#" aria-haspopup="true" aria-owns="browse-menu-link-content" title="Browse">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a id="space-pages-link" href="https://sdkdocs.roku.com/pages/listpages.action?key=sdkdoc" class="    " title="Browse pages in the Roku SDK Documentation space">
        Pages
</a>
</li>
                                            <li>
    
            
<a id="space-blogposts-link" href="https://sdkdocs.roku.com/pages/viewrecentblogposts.action?key=sdkdoc" class="    " title="Browse blogs in the Roku SDK Documentation space">
        Blog
</a>
</li>
                                            <li>
    
            
<a id="space-labels-link" href="https://sdkdocs.roku.com/labels/listlabels-heatmap.action?key=sdkdoc" class="    " title="Browse labels in the Roku SDK Documentation space">
        Labels
</a>
</li>
                                            <li>
    
            
<a id="space-advanced-link" href="https://sdkdocs.roku.com/spaces/viewspacesummary.action?key=sdkdoc" class="    " title="Browse additional space functions in the Roku SDK Documentation space">
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
                        <li class="aui-buttons">
            </li>
    </ul>
</div></div>
<!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    <div id="splitter">
    <div id="splitter-sidebar" class="padding-div">
        

                    
    






            </div>
    <div id="splitter-content">

        

                        
            
<div id="main" class="aui-page-panel">
    <div id="main-header">
        
        
    

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                                        
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="../sdkdoc.1.html">Roku SDK Documentation</a></span>
                                                                    
                        
        </li>
<li>
                        
                            <span class=""><a href="BrightScript+Language+Reference.html">BrightScript Language Reference</a></span>
                                                    </li>
</ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="Component+Architecture.html">Component Architecture</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




        













    
    
        
    
    
                    
    

    


<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        


        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="3737186">
        </fieldset>

                            
    

                    

        
        <a href="Component+Architecture.html#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a id="content-metadata-page-restrictions-hidden" href="Component+Architecture.html#" rel="nofollow" class="hidden" title="Unrestricted">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="../~breid.html" class="url fn">Bill Reid</a></span>, last modified on <a class="last-modified" title="Show changes" href="https://sdkdocs.roku.com/pages/diffpagesbyversion.action?pageId=3737197&amp;selectedPageVersions=6&amp;selectedPageVersions=7">Jan 27, 2016</a>
                </li>
        </ul>
    </div>


<a href="Component+Architecture.html#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <hr>
<p></p>
<div class="toc-macro client-side-toc-macro manualtoc conf-macro output-block" data-csslistindent="18px" data-cssliststyle="square" data-hasbody="false" data-headerelements="H1,H2,H3,H4" data-macro-name="toc"> </div>
<hr>
<p>The BrightScript Component architecture and library are separate from BrightScript, but BrightScript requires them.</p>
<ul>
<li>All APIs exposed to BrightScript are exposed as BrightScript components. In other words, if a platform wants to expose APIs to be scripted, the platform must register a new BrightScript component.</li>
<li>BrightScript has language features that are designed to work with BrightScript component Interfaces. These include: for each, print, the array operator, dot operator, and intrinsic objects.</li>
<li>Fundamental BrightScript building blocks are implemented as BrightScript components. For example: Lists, Vector Arrays, Associative Arrays, and Objects.</li>
</ul>
<h2 id="ComponentArchitecture-BriefSummaryofBrightScriptComponents">Brief Summary of BrightScript Components</h2>
<p><br class="atl-forced-newline"> BrightScript Components are robust against version changes. In other words, scripts are generally backwards compatible with Objects that have undergone version improvements.</p>
<p>BrightScript Components keep a reference count and delete themselves when the reference count goes to zero.</p>
<p>A key BrightScript Component concept is the Interface. The term Interface is used here as it is in Java or Microsoft COM. An interface is a known set of member functions that implement a set of logic. In some ways an Interface is like a virtual base class in C++. Any script or C-compatible program can use an object's interface without regard to what type of object it is a part of, as long as it is familiar with a particular interface. For example, the roUrlTransfer component implements four interfaces: ifUrlTransfer, ifHttpAgent, ifSetMessagePort and ifGetMessagePort.</p>
<h2 id="ComponentArchitecture-BrightScriptstatementsthatworkwithBrightScriptComponentInterfaces">BrightScript statements that work with BrightScript Component Interfaces</h2>
<p><strong>For each</strong><br> The for-each statement works on any object that has an <a href="ifEnum.html">ifEnum</a> interface. These include: Array, Associative Array, List, ByteArray, and MessagePort. </p>
<p><strong>Print</strong><br> If the expression being printed evaluates to an object that has an <a href="ifEnum.html">ifEnum</a> interface, print will print every item that can be enumerated. <br class="atl-forced-newline"> In addition to printing the values of intrinsic types, PRINT will also print any object that exposes one of these interfaces: <a href="ifString.html">ifString</a>, <a href="ifInt.html">ifInt</a>, <a href="ifFloat.html">ifFloat</a>.</p>
<p><strong>Wait</strong><br> The wait function will work on any object that has an <a href="ifMessagePort.html">ifMessagePort</a> interface.</p>
<p><strong>Array Operator –"[]"</strong><br> The array operator works on any object that has an <a href="ifArrayGet.html">ifArrayGet</a> or <a href="ifArraySet.html">ifArraySet</a> interface. This includes Array, AssociativeArray, ByteArray, and Lists.</p>
<p><strong>Member access operator "."</strong><br> The "." Operator works on any object that has an <a href="ifAssociativeArray.html">ifAssociativeArray</a> interface (as well as on any BrightScript Component (when calling a member function)). It also has special meaning when used on <a href="roXMLElement.html">roXMLElement</a> or <a href="roXMLList.html">roXMLList</a>.</p>
<p><strong>Expression Parsing</strong><br> Any expression that is expecting an Integer, Float, Double, Boolean or String, can take an object with the <a href="ifInt.html">ifInt</a>, <a href="ifFloat.html">ifFloat</a>, <a href="ifDouble.html">ifDouble</a>, <a href="ifBoolean.html">ifBoolean</a>, or <a href="ifString.html">ifString</a> interface.</p>
<h2 id="ComponentArchitecture-Intrinsictypesandobjecttypes">Intrinsic types and object types</h2>
<p>A variable may hold either an "intrinsic type" or an "object type".  An intrinsic type is one of Integer, Float, Double, String, Invalid, Boolean or Function.  An object type is one of Array, Associative Array or BrightScript Component.  The most important difference is a variable containing an intrinsic type contains the value itself; that is, the Integer, Float, Double, etc. is contained within the variable.  On the other hand, a variable containing an object type contains merely a pointer or reference to the actual object.  Assigning an object type results in two pointers to the same object, while assigning an intrinsic type results in two copies of the same value, which can be modified independently of each other.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[a = 42  &#39; a contains an intrinsic Integer
b = a   &#39; b contains a copy of a
a = 43  &#39; does not modify b
b = 44  &#39; does not modify a

a = [ 1,2,3 ]   &#39; a contains a reference to an array
b = a           &#39; b contains another reference to the same array
a[0] = 5        &#39; now both a[0] and b[0] equal 5
b[1] = 6        &#39; now both a[1] and b[1] equal 6]]></script>
</div>
</div>
<p>The same thing holds true when variables are passed as function parameters.  If the variable is intrinsic, the function parameter is a copy of the original.  But if the variable is object, the function parameter is merely an additional reference to the same object. That is, intrinsic variables are "passed by value", while object variables are "passed by reference".</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[function Modify(a as Integer, b as Object) as Void
	a = 43
	b.first = 6
end function

.....

	x = 42
	y = { first: 1, second: 2 }
	Modify(x, y)
	&#39; now x is still 42 but y.first is 6]]></script>
</div>
</div>
<p>Each object maintains a "reference count", which is the number of variables which refer to the object.  The reference count is set to 1 when the object is created and a reference to it is saved in a variable.  When an object's reference count drops to zero, the object is destroyed.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: java; gutter: false; theme: Confluence"><![CDATA[a = CreateObject(&quot;roArray&quot;)   &#39; array has a ref count of 1
b = a                         &#39; array has a ref count of 2
a = invalid                   &#39; array has a ref count of 1 (a no longer refers to it)
c = b                         &#39; array has a ref count of 2
b = 100                       &#39; array has a ref count of 1 (b no longer refers to it)
c = invalid                   &#39; array has a ref count of 0 and is destroyed]]></script>
</div>
</div>
<p>Note that after the last statement, since no variables refer to the object any longer, it would be impossible to use the object even if it were not destroyed.</p>
<h2 id="ComponentArchitecture-Useofwrapperfunctionsonintrinsictypes">Use of wrapper functions on intrinsic types</h2>
<p>If an intrinsic types is passed to a function that expects an Object, a "wrapper" object will be created, assigned the correct value, and passed to the function. Wrapper objects are objects which behave like the intrinsic entities that they represent.  For example, an integer may be converted to an roInt object, which can be used much like an ordinary integer, but it has object semantics. This automatic conversion to an object is sometimes referred to as "autoboxing".</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[Function Main()
	MyFunA(4)
	MyFunB(4) 
End Function 
     
Function MyFunA(p as Object) as Void
	print &quot;A&quot;,p,type(p)
End Function 
 
Function MyFunB(p as Integer) as Void
	print &quot;B&quot;,p,type(p)
End Function]]></script>
</div>
</div>
<p>Will Print: </p>
<p>  A 4 roInt<br>  B 4 Integer</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[Print 5.tostr()+&quot;th&quot;   &#39; prints 5th
Print &quot;5&quot;.toint()+5    &#39; prints 10
If type(5.tostr())&lt;&gt; &quot;String&quot; Then Stop
If (-5).tostr()&lt;&gt;&quot;-5&quot; Then Stop
If (1+2).tostr()&lt;&gt;&quot;3&quot; Then Stop
If 5.tostr()&lt;&gt;&quot;5&quot; Then Stop
i=-55
If i.tostr()&lt;&gt;&quot;-55&quot; Then Stop
If 100%.tostr()&lt;&gt;&quot;100&quot; Then Stop
If (-100%).tostr()&lt;&gt;&quot;-100&quot; Then Stop
y%=10
If y%.tostr()&lt;&gt;&quot;10&quot; Then Stop 
If &quot;5&quot;.toint()&lt;&gt;5 Or type(&quot;5&quot;.toint())&lt;&gt;&quot;Integer&quot; Then Stop
If &quot;5&quot;.tofloat()&lt;&gt;5.0 Or type(&quot;5&quot;.tofloat())&lt;&gt;&quot;Float&quot; Then Stop
fs=&quot;-1.1&quot;
If fs.tofloat()&lt;&gt;-1.1 Or fs.toint()&lt;&gt;-1 Then Stop 
If &quot;01234567&quot;.left(3)&lt;&gt;&quot;012&quot; Then Stop
If &quot;01234567&quot;.right(4)&lt;&gt;&quot;4567&quot; Then Stop
If &quot;01234567&quot;.mid(3)&lt;&gt;&quot;34567&quot; Then Stop
If &quot;01234567&quot;.mid(3,1)&lt;&gt;&quot;3&quot; Then Stop
If &quot;01234567&quot;.instr(&quot;56&quot;)&lt;&gt;5 Then Stop
If &quot;01234567&quot;.instr(6,&quot;56&quot;)&lt;&gt;-1 Then Stop
If &quot;01234567&quot;.instr(0,&quot;0&quot;)&lt;&gt;0 Then Stop]]></script>
</div>
</div>
<div class="confluence-information-macro confluence-information-macro-note conf-macro output-block" data-hasbody="true" data-macro-name="note">
<span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"> </span><div class="confluence-information-macro-body">
<p>Note that</p>
<pre>    -5.tostr() </pre>
<p>Will cause an error since the dot operator binds tighter than unary negation.  Use:</p>
<pre>  (-5).tostr()</pre>
</div>
</div>
<h2 id="ComponentArchitecture-BrightScriptXMLSupport">BrightScript XML Support</h2>
<p>BrightScript supports XML via two BrightScript Components, and some dedicated language features. The BrightScript Component roXMLElement provides support for parsing, generating, and containing XML. In addition, the roXMLList object is often used to hold lists of roXMLElement, and implements the BrightScript standard ifList interface as well as the ifXMLList interface. Language features are provided via the dot operator, and the @ operator.  BrightScript XML support is limited to UTF-8 encoded content.</p>
<h3 id="ComponentArchitecture-DotOperator">Dot Operator</h3>
<ul>
<li>When applied to an roXMLElement, the dot operator returns an roXMLList of children that match the dot operand. If no tags match, an empty list is returned.</li>
<li>When applied to an roXMLList, the dot operator aggregates the results of performing the dot operator on each roXMLElement in the list.</li>
<li>When used on XML, which is technically case sensitive, the dot operator is still case insensitive. If you wish to do a case sensitive XML operation, don't use the dot operator. Use the XML member functions.</li>
</ul>
<h3 id="ComponentArchitecture-AttributeOperator">Attribute Operator</h3>
<p>The @ operator can be used on an roXMLElement to return a named attribute. It is always case insensitive (despite the fact that XML is technically case sensitive). When used on an roXMLList, the @ operator will return a value only if the list contains exactly one element.</p>
<p>For example, if the file "example.xml" contains the following:</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: html/xml; gutter: false; theme: Confluence"><![CDATA[&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt; 
&lt;rsp stat=&quot;ok&quot;&gt;
  &lt;photos page=&quot;1&quot; pages=&quot;5&quot; perpage=&quot;100&quot; total=&quot;500&quot;&gt;
    &lt;photo id=&quot;3131875696&quot; owner=&quot;21963906@N06&quot; secret=&quot;f248c84625&quot; server=&quot;3125&quot; farm=&quot;4&quot; title=&quot;VNY 16R&quot; ispublic=&quot;1&quot; isfriend=&quot;0&quot; isfamily=&quot;0&quot; /&gt; 
    &lt;photo id=&quot;3131137552&quot; owner=&quot;8979045@N07&quot; secret=&quot;b22cfde7c4&quot; server=&quot;3078&quot; farm=&quot;4&quot; title=&quot;hoot&quot; ispublic=&quot;1&quot; isfriend=&quot;0&quot; isfamily=&quot;0&quot; /&gt; 
    &lt;photo id=&quot;3131040291&quot; owner=&quot;27651538@N06&quot; secret=&quot;ae25ff3942&quot; server=&quot;3286&quot; farm=&quot;4&quot; title=&quot;172 • 365 :: Someone once told me...&quot; ispublic=&quot;1&quot; isfriend=&quot;0&quot; 
  &lt;/photos&gt;
&lt;/rsp&gt;]]></script>
</div></div>
<p>Then</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[ rsp=CreateObject(&quot;roXMLElement&quot;)
 rsp.Parse(ReadAsciiFile(&quot;tmp:/example.xml&quot;))]]></script>
</div></div>
<p>? rsp.photos.photo<br>Will return an roXMLList with three entries.</p>
<p>? rsp.photos.photo[0]<br> Will return an roXMLElement reference to the first photo (id="3131875696").</p>
<p>? rsp.photos<br> Will return an roXMLList reference containing the photos tag.</p>
<p>rsp.photos@perpage<br> Will return the string 100.</p>
<p>Use the GetText() method to return an element's text. <br class="atl-forced-newline"> For example, if the variable booklist contains this roXMLElement:</p>
<pre> &lt;booklist&gt;<br> &lt;book lang=eng&gt;The Dawn of Man&lt;/book&gt;<br> &lt;/booklist&gt;</pre>
<p>then</p>
<pre> print booklist.book.gettext()</pre>
<p>will print "The Dawn of Man", and</p>
<pre> print booklist.book@lang </pre>
<p>will print "eng".</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example: flikr </b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[REM
REM Interestingness
REM pass an (optional) page of value 1 - 5 to get 100 photos 
REM starting at 0/100/200/300/400
REM
REM returns a list of &quot;Interestingness&quot; photos with 100 entries
REM 
Function GetInterestingnessPhotoList(http as Object, page=1 as Integer) as Object 
	print &quot;page=&quot;;page 
	http.SetUrl(&quot;http://api.flickr.com/services/rest/?method=flickr.interestingness.getList&amp;api_key=YOURKEYGOESHERE&amp;page=&quot;+mid(stri(page),2)) 
	xml=http.GetToString() 
	rsp=CreateObject(&quot;roXMLElement&quot;)
	If Not rsp.Parse(xml) Then Stop 
	Return helperPhotoListFromXML(http, rsp.photos.photo) &#39;rsp.GetBody().Peek().GetBody())  
End Function 

Function helperPhotoListFromXML(http as Object, xmllist as Object, 
	owner=invalid as dynamic) as Object 
	photolist=CreateObject(&quot;roList&quot;)
	For Each photo In xmllist
		photolist.Push(newPhotoFromXML(http, photo, owner))
	End For
	Return photolist 
End Function 

REM
REM newPhotoFromXML
REM
REM Takes an roXMLElement Object that is an &lt;photo&gt; ... &lt;/photo&gt;
REM Returns an brs object of type Photo
REM photo.GetTitle()
REM photo.GetID()
REM photo.GetURL()
REM photo.GetOwner()
REM 
Function newPhotoFromXML(http as Object, xml as Object, owner as dynamic) as Object
	photo = CreateObject(&quot;roAssociativeArray&quot;)
	photo.http=http
	photo.xml=xml
	photo.owner=owner
	photo.GetTitle=function():return m.xml@title:end function
	photo.GetID=function():return m.xml@id:end function
	photo.GetOwner=pGetOwner
	photo.GetURL=pGetURL
	Return photo
End Function 


Function pGetOwner() as String
	If m.owner &lt;&gt; Invalid Return m.owner
		Return m.xml@owner
End Function 

Function pGetURL() as String
	a=m.xml.GetAttributes()
	url=&quot;http://farm&quot;a.farm&quot;.static.flickr.com/&quot;a.server&quot;/&quot;a.id&quot;_&quot;a.secret&quot;.jpg&quot;
	Return url
End Function]]></script>
</div>
</div>
<h2 id="ComponentArchitecture-GarbageCollection">Garbage Collection</h2>
<p>BrightScript will automatically free strings when they are no longer used, and it will free objects when their reference count goes to zero. This is done at the time the object or string is no longer used; there is no background garbage collection task. This results in very predictable "garbage collection" – there are no unexpected stalls in execution.</p>
<p>A "mark and sweep" garbage collection is run after a script executes, or can be manually forced to run via the debug console. A script can force the Garbage Collector to run via the RunGarbageCollector() function. The Garbage Collector's purpose is to clean up objects that refer to themselves or have other circular references (which are not managed by the normal reference counting garbage collection).</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[i=roCreateObject(&quot;roInt&quot;)
j=i &#39; reference incremented
i=invalid &#39; reference decremented
j=0 &#39; roInt just free&#39;d.]]></script>
</div>
</div>
<h2 id="ComponentArchitecture-Events">Events</h2>
<p>Events in BrightScript center around an event loop and the roMessagePort BrightScript Component. Any BrightScript Component can be posted to a message port. Typically these will be Objects that are designed to represent an events. For example, the roFilesystem class posts events of type roFilesystemEvent.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[fs = CreateObject(&quot;roFilesystem&quot;)
port = CreateObject(&quot;roMessagePort&quot;)
fs.SetMessagePort(port)
while true
	msg = wait(0, port) 
	if type(msg)=&quot;roFileSystemEvent&quot; then 
		if msg.isStorageDeviceAdded() then print &quot;device added&quot;
	end if
End While
]]></script>
</div>
</div>
<h2 id="ComponentArchitecture-ThreadingModel">Threading Model</h2>
<p>A BrightScript script runs in a single thread. Multiple threads cannot be created in a BrightScript program. The general rule of thumb is that BrightScript Component calls are synchronous if they return quickly, or asynchronous if they take a long time to complete. For example, class roArray methods are all synchronous. But if "roVideoPlayer" is used to play a video, the Play() method returns immediately while video continues to play (it is asynchronous). As the video plays, it will post events to a message port. Typical events would be "media finished" or "time x reached".  Some components have a choice of synchronous or asynchronous methods; for example roUrlTransfer has methods GetToString() which is synchronous (returns only after the transfer is complete) and AsyncGetToString() which is asynchronous (returns immediately and the transfer continues in the background).</p>
<p>This threading model means that the script writer does not have to deal with mutexes, condition variables, and other synchronization objects.  The script merely receives and processes messages to handle events happening in the background.</p>
<h2 id="ComponentArchitecture-Scope">Scope</h2>
<p>BrightScript uses the following scoping rules:</p>
<ul>
<li>BrightScript does not support global variables. Except, there is one hard-coded global variable "global" that is an interface to the global BrightScript Component. The global component contains all global library functions. There is also a global context that can be accessed via the <a href="Runtime+Functions.html#RuntimeFunctions-GetGlobalAA()asObject">GetGlobalAA()</a>.  If in function scope and that function is not a method in an object, "m." also references the global associative array accessed with <a href="Runtime+Functions.html#RuntimeFunctions-GetGlobalAA()asObject">GetGlobalAA()</a>.</li>
<li>Functions declared with the FUNCTION statement are at global scope, unless they are anonymous, in which case they are local scope.</li>
<li>Local variables exist with function Scope. If a function calls another function, that new function has its own scope.</li>
<li>Labels exist in function scope.</li>
<li>Block Statements (like FOR-END FOR or WHILE-END WHILE) do not create a separate scope.</li>
</ul>
<h2 id="ComponentArchitecture-CreatingandUsingIntrinsicObjects">Creating and Using Intrinsic Objects</h2>
<p>In most of this manual we use the term "object" to refer to a "BrightScript Component". These are C or C++ components with interfaces and member functions that BrightScript uses directly. Other than a few core objects that BrightScript relies upon (roArray, roAssociativeArray, roInt, etc.) BrightScript Components are platform specific.</p>
<p>You can also create "intrinsic" objects in BrightScript itself to use in your scripts. These act in some ways like Components; for example, the syntax to invoke a method in a Component or in an intrinsic object is identical: "object.function()". However, to be clear, these are not BrightScript Components. There is currently no way to create a BrightScript Component in BrightScript, or to create intrinsic objects that have interfaces (they only contain member functions, properties, or other objects).</p>
<p>An intrinsic object is simply an roAssociativeArray which contains function references. When a function is called "from" an Associative Array, a special pointer named "m" is accessible inside the function, which refers to the Associative Array.  A "constructor" in BrightScript is a normal function at global scope that creates the Associative Array and fills in its member functions and properties.</p>
<h2 id='ComponentArchitecture-"m"TheBrightScript"thispointer"'>"m" The BrightScript "this pointer"</h2>
<p>A BrightScript object is an roAssociativeArray which contains function pointers.  When a member function is called "from" an AssociativeArray, the special variable "m" is set to point to that AssociativeArray. "m" is accessible inside the called function to access other data in the AssociativeArray object.</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div>
<div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: vb; gutter: false; theme: Confluence"><![CDATA[function Main()
     obj = ConstructMyObject()
     obj.Set(&quot;hi!&quot;)
     print obj.Get()
     print &quot;--------&quot;
     print obj
     stop
end function 

function ConstructMyObject() 
     obj = {
         Set       : function(x) : m.Value = x : end function
         Get       : function() : return m.Value : end function
         Value     : 0
     } 
     return obj 
end function]]></script>
</div>
</div>
<p>Output:</p>
<p>hi!<br> --------<br> value: hi!<br> get: &lt;bsTypedValue: Function&gt;<br> set: &lt;bsTypedValue: Function&gt;</p>
<h2 id="ComponentArchitecture-ScriptLibraries">Script Libraries</h2>
<p>In addition to the platform BrightScript components discussed in <a href="Component+Architecture.html#ComponentArchitecture-BriefSummaryofBrightScriptComponents">Brief Summary of BrightScript Components</a>, BrightScript 3.0 enables Script Libraries to be used in your scripts. The BrightScript libraries are .brs files, that are provided by the BrightScript platform or you can provide. They can be included in your source files with the new "Library" keyword. Libraries are searched for in pkg:/ folder and then the system library path. On the Roku Streaming Player, the system library path is "common:/LibCore".</p>
<p><strong>Example</strong><br> Library "v30/bslCore.brs"</p>
<p>Those interested in the contents of the library files, can view the source on their debug console:</p>
<p>BrightScript&gt; bslCore = ReadAsciiFile("common:/LibCore/v30/bslCore.brs")<br> BrightScript&gt; print bslCore</p>
<h3 id="ComponentArchitecture-v30/bslCore.brs">v30/bslCore.brs</h3>
<p>This "system" library includes constant name value pairs in associative arrays.</p>
<h4 id="ComponentArchitecture-bslBrightScriptErrorCodes()asObject">bslBrightScriptErrorCodes() as Object</h4>
<ul><li>Returns an roAssociativeArray with name value pairs of the error name and value.</li></ul>
<h4 id="ComponentArchitecture-bslGeneralConstants()asObject">bslGeneralConstants() as Object</h4>
<ul><li>Returns an roAssociativeArray with name value pairs of the system constants</li></ul>
<h4 id="ComponentArchitecture-bslUniversalControlEventCodes()asObject">bslUniversalControlEventCodes() as Object</h4>
<ul><li>Returns an roAssociativeArray with name value pairs of the remote key code (buttons) constants</li></ul>
<h4 id="ComponentArchitecture-AsciiToHex(asciiasString)asString">AsciiToHex(ascii as String) as String</h4>
<ul><li>Returns a String that is the Hex encode of the passed in ascii string</li></ul>
<h4 id="ComponentArchitecture-HexToAscii(hexasString)asString">HexToAscii(hex as String) as String</h4>
<ul><li>Returns a String that is the hex decode ascii text of the hex input string</li></ul>
<h4 id="ComponentArchitecture-HexToInteger(hexasString)asInteger">HexToInteger(hex as String) as Integer</h4>
<ul><li>Returns the integer value of the passed in hex string.</li></ul>
<h3 id="ComponentArchitecture-v30/bslDefender.brs">v30/bslDefender.brs</h3>
<p>This library includes 2D graphics helper functions on top of the native components. <br> Object dfNewBitmapSet(String filename)<br> The goal is to enable simple xml descriptions of graphics resources like bitmaps, regions, sprites, animations, and layouts to be used in your games. The library handles parsing, loading, rendering, and animation of sprites sheets (multiple images in a single png file).</p>
<ul>
<li>filename is the path to an XML file that contains info about bitmap regions, animation frames, and ExtraInfo metadata (any fields you would like) about resources used in 2d games.</li>
<li>Returns an roAssociativeArray with the following name value pairs:<ul>
<li>ExtraInfo :roAssociativeArray<ul><li>Contains any name value pairs the designer desires.</li></ul>
</li>
<li>Regions : roAssociativeArray of name, roRegions pairs<ul>
<li>The roAssociative array returns a set of Regions from Region tag information from the xml.</li>
<li>Used to describe regions of a bitmap</li>
<li>Bitmap contains parameters: name, filename where filename is a .png, .gif, or .jpg file</li>
<li>Region contains parameters: name, x, y, w, h and is a subtag of a bitmap</li>
</ul>
</li>
<li>Animations : roAssociativeArray of name, roArray of roRegion pairs.<ul>
<li>The top level roAssociativeArray is the animation name with a value of an array of frames that represent the animation</li>
<li>Each frame is an roRegion that is represented in the xml by the "use" parameter. The use parameter refers to a previously defined Bitmap.Region returned in the Regions info.</li>
<li>Animation frame descriptions can be used by the roSprite and roCompositor components.</li>
</ul>
</li>
<li>Backgrounds : roAssociativeArray of name, path pairs.<ul>
<li>Backgrounds do not create bitmaps at this point</li>
<li>Use in conjunction with dfSetBackground() to manage backgrounds</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ComponentArchitecture-dfDrawMessage(destasObject,regionasObject)asVoid">dfDrawMessage(dest as Object, region as Object) as Void</h4>
<ul>
<li>dest is an roScreen/roBitmap/roRegion and region is an roRegion</li>
<li>greys the entire dest region and draws it the region centered on the drawable dest.</li>
</ul>
<h4 id="ComponentArchitecture-dfDrawImage(destasObject,pathasString,xasInteger,yasInteger)asBoolean">dfDrawImage(dest as Object, path as String, x as Integer, y as Integer) as Boolean</h4>
<ul>
<li>Returns True if successful</li>
<li>Creates a bitmap out of the image stored in the filename "path" and draws it at position (x,y) of the drawable dest.</li>
</ul>
<h4 id="ComponentArchitecture-dfSetupDisplayRegions(screenasObject,topxasInteger,topyasInteger,widthasInteger,heightasInteger)asObject">dfSetupDisplayRegions(screen as Object, topx as Integer, topy as Integer, width as Integer, height as Integer) as Object</h4>
<ul>
<li>Helper function to setup screen scaling with supplied pillar box or letterbox images to fill the entire screen.</li>
<li>screen is an roScreen</li>
<li>topx and topy are the coordinates of the upper left hand corner of the main drawing region</li>
<li>Width and height is the size of the main drawing region</li>
<li>Returns an associative array containing the following roRegions</li>
</ul>
<p>Main: main drawable region<br> Left: left region if there is pillar box area on the left<br> Right: right region if there is a pillar box area on the right<br> Upper: upper region if there is a letterbox area at thetop<br> Lower: lower region if there is a letterbox area at the bottom<br> When using these regions as drawables, your graphics will be translated and clipped to these regions. <br class="atl-forced-newline"> Object dfSetBackground(String backgroundName, Object backgrounds)</p>
<ul>
<li>dfSetBackground helps manage the limited video memory. The video memory does not currently run a defragmenter, and is very limited. These constraints make it important that large bitmaps (like backgrounds that fill the entire screen) are only allocated when needed. It is also helpful if you set your first initial background very early in your program, and then immediately replace the background after it is no longer in use. This helper function supports this background management for your application.</li>
<li>backgroundName is a key for the Backgrounds roAssociative array of backgrounds.</li>
<li>Backgrounds is an roAssociative array of background name keys and file path string values</li>
<li>This function creates an roBitmap out of the background image file and returns a region the size of the entire roBitmap.</li>
</ul>
<p> </p>
<h6 id="ComponentArchitecture-Example:bslDefender.brs">Example: bslDefender.brs</h6>
<p><br class="atl-forced-newline"> If spriteMap.xml contains the following:</p>
<div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: html/xml; gutter: false; theme: Confluence"><![CDATA[&lt;DefenderBitmapSet&gt;
&lt;ExtraInfo cellsize=&quot;40&quot;/&gt;
&lt;Bitmap name=&quot;Background&quot; filespec=&quot;pkg:/images/background.png&quot; /&gt;
&lt;Bitmap name=&quot;game-over&quot; filespec=&quot;pkg:/images/gameover.png&quot; /&gt;
&lt;Bitmap name=&quot;title-screen&quot; filespec=&quot;pkg:/images/Splash.gif&quot; /&gt;
&lt;Bitmap name=&quot;water_strip&quot; filespec=&quot;pkg:/images/water_sprite.png&quot;&gt;
&lt;Region name=&quot;a&quot; x=&quot;0&quot; y=&quot;&quot; w=&quot;40&quot; h=&quot;40&quot; t=&quot;225&quot; /&gt;
&lt;Region name=&quot;b&quot; x=&quot;40&quot; y=&quot;0&quot; w=&quot;40&quot; h=&quot;40&quot; t=&quot;225&quot; /&gt;
&lt;/Bitmap&gt;
&lt;Animation name=&quot;water&quot;&gt;
&lt;frame use=&quot;water_strip.a&quot; /&gt;
&lt;frame use=&quot;water_strip.b&quot; /&gt;
&lt;/Animation&gt;
&lt;/DefenderBitmapSet&gt;]]></script>
</div></div>
<p><br class="atl-forced-newline"> Then</p>
<pre> BrightScript&gt; xml = ReadAsciiFile("pkg:/images/map.xml")<br> BrightScript&gt; bitmapset = dfNewBitmapSet(xml)<br> BrightScript&gt; cellwidth=app.bitmapset.extrainfo.cellsize.toint()<br> BrightScript&gt; print bitmapset.regions<br> Background: &lt;Component: roRegion&gt;<br> game-over: &lt;Component: roRegion&gt;<br> title-screen: &lt;Component: roRegion&gt;<br> water_strip.a: &lt;Component: roRegion&gt;<br> water_strip.b: &lt;Component: roRegion&gt;<br> water_strip: &lt;Component: roRegion&gt;<br> BrightScript&gt; print bitmapset.animations.water<br> &lt;Component: roRegion&gt;<br> &lt;Component: roRegion&gt;<br> BrightScript&gt; dfDrawMessage(screen, bitmapset.regions["game-over"])<br> BrightScript&gt; REM screen now shows gameover.png image centered on screen</pre>
<p> </p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://sdkdocs.roku.com/display/sdkdoc/Component+Architecture"
    dc:identifier="https://sdkdocs.roku.com/display/sdkdoc/Component+Architecture"
    dc:title="Component Architecture"
    trackback:ping="https://sdkdocs.roku.com/rpc/trackback/3737197"/>
</rdf:RDF>
-->

            
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="3737197" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>

            
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


            
</div>


    




    
    

    
    
    








</div>
  
    </div>
</div>


        
            
            



    </div>
</body>
</html>
